{"ast":null,"code":"import { Animation, ChildProperty, Collection, Complex, Component, Event, EventHandler, KeyboardEvents, NotifyPropertyChanges, Property, SanitizeHtmlHelper, addClass, attributes, classList, closest, createElement, deleteObject, detach, extend, getInstance, getUniqueID, getValue, isNullOrUndefined, remove, removeClass, rippleEffect, select, setValue } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Popup, createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\n\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * @param {Object} props - Specifies the properties\n * @param {string[]} model - Specifies the model\n * @returns {Object} Component Model\n */\n\n\nfunction getModel(props, model) {\n  const obj = extend({}, props);\n\n  for (const prop of Object.keys(obj)) {\n    if (model.indexOf(prop) < 0) {\n      deleteObject(obj, prop);\n    }\n  }\n\n  return obj;\n}\n/** @hidden\n * @param {HTMLElement} ul - Specifies the UL element\n * @param {number} keyCode - Specifies the keycode\n * @returns {void}\n */\n\n\nfunction upDownKeyHandler(ul, keyCode) {\n  const defaultIdx = keyCode === 40 ? 0 : ul.childElementCount - 1;\n  let liIdx = defaultIdx;\n  let li;\n  const selectedLi = ul.querySelector('.e-selected');\n\n  if (selectedLi) {\n    selectedLi.classList.remove('e-selected');\n  }\n\n  for (let i = 0, len = ul.children.length; i < len; i++) {\n    if (ul.children[i].classList.contains('e-focused')) {\n      li = ul.children[i];\n      liIdx = i;\n      li.classList.remove('e-focused');\n\n      if (keyCode === 40) {\n        liIdx++;\n      } else {\n        liIdx--;\n      }\n\n      if (liIdx === (keyCode === 40 ? ul.childElementCount : -1)) {\n        liIdx = defaultIdx;\n      }\n    }\n  }\n\n  li = ul.children[liIdx];\n  liIdx = isValidLI(ul, li, liIdx, keyCode);\n\n  if (liIdx !== -1) {\n    addClass([ul.children[liIdx]], 'e-focused');\n    ul.children[liIdx].focus();\n  }\n}\n/**\n * Get Valid LI element\n *\n * @param {HTMLElement} ul - Specifies the UL element\n * @param {Element} li - Specifies the LI element\n * @param {number} index - Specifies the index\n * @param {number} keyCode - Specifies the keycode\n * @param {number} count - Specifies the count\n * @returns {number} - Index\n */\n\n\nfunction isValidLI(ul, li, index, keyCode, count = 0) {\n  if (li.classList.contains('e-separator') || li.classList.contains('e-disabled')) {\n    if (index === (keyCode === 40 ? ul.childElementCount - 1 : 0)) {\n      index = keyCode === 40 ? 0 : ul.childElementCount - 1;\n    } else {\n      if (keyCode === 40) {\n        index++;\n      } else {\n        index--;\n      }\n    }\n  }\n\n  li = ul.children[index];\n\n  if (li.classList.contains('e-separator') || li.classList.contains('e-disabled')) {\n    count++;\n\n    if (count === ul.childElementCount) {\n      return index = -1;\n    }\n\n    index = isValidLI(ul, li, index, keyCode, count);\n  }\n\n  return index;\n}\n/** @hidden\n * @param {HTMLElement} popup - Specifies the popup element.\n * @returns {void}\n */\n\n\nfunction setBlankIconStyle(popup) {\n  const blankIconList = [].slice.call(popup.getElementsByClassName('e-blank-icon'));\n\n  if (!blankIconList.length) {\n    return;\n  }\n\n  let iconLi = popup.querySelector('.e-item:not(.e-blank-icon):not(.e-separator)');\n\n  if (iconLi.classList.contains('e-url')) {\n    iconLi = iconLi.querySelector('.e-menu-url');\n  }\n\n  const icon = iconLi.querySelector('.e-menu-icon');\n  let cssProp;\n  const enableRtl = popup.classList.contains('e-rtl');\n\n  if (enableRtl) {\n    cssProp = {\n      padding: 'paddingRight',\n      margin: 'marginLeft'\n    };\n  } else {\n    cssProp = {\n      padding: 'paddingLeft',\n      margin: 'marginRight'\n    };\n  }\n  /* eslint-disable */\n\n\n  let size = `${parseInt(getComputedStyle(icon).fontSize, 10) + parseInt(enableRtl ? getComputedStyle(icon)[cssProp.margin] : getComputedStyle(icon)[cssProp.margin], 10) + parseInt(getComputedStyle(iconLi).paddingLeft, 10)}px`;\n  blankIconList.forEach(li => {\n    if (li.classList.contains('e-url')) {\n      li.querySelector('.e-menu-url').style[cssProp.padding] = size;\n    } else {\n      li.style[cssProp.padding] = size;\n    }\n  });\n  /* eslint-enable */\n}\n/**\n * Defines the items of Split Button/DropDownButton.\n */\n\n\nclass Item extends ChildProperty {}\n\n__decorate([Property('')], Item.prototype, \"iconCss\", void 0);\n\n__decorate([Property('')], Item.prototype, \"id\", void 0);\n\n__decorate([Property(false)], Item.prototype, \"separator\", void 0);\n\n__decorate([Property('')], Item.prototype, \"text\", void 0);\n\n__decorate([Property('')], Item.prototype, \"url\", void 0);\n\n__decorate([Property(false)], Item.prototype, \"disabled\", void 0);\n/**\n * Common modules\n */\n\n\nvar __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nconst classNames = {\n  DISABLED: 'e-disabled',\n  FOCUS: 'e-focused',\n  ICON: 'e-menu-icon',\n  ITEM: 'e-item',\n  POPUP: 'e-dropdown-popup',\n  RTL: 'e-rtl',\n  SEPARATOR: 'e-separator',\n  VERTICAL: 'e-vertical'\n};\n/**\n * DropDownButton component is used to toggle contextual overlays for displaying list of action items.\n * It can contain both text and images.\n * ```html\n * <button id=\"element\">DropDownButton</button>\n * ```\n * ```typescript\n * <script>\n * var dropDownButtonObj = new DropDownButton({items: [{ text: 'Action1' }, { text: 'Action2' },{ text: 'Action3' }]);\n * dropDownButtonObj.appendTo(\"#element\");\n * </script>\n * ```\n */\n\nlet DropDownButton = class DropDownButton extends Component {\n  /**\n   * Constructor for creating the widget\n   *\n   * @param  {DropDownButtonModel} options - Specifies dropdown button model\n   * @param  {string|HTMLButtonElement} element - Specifies element\n   * @hidden\n   */\n  constructor(options, element) {\n    super(options, element);\n    this.isPopupCreated = true;\n  }\n\n  preRender() {\n    /** */\n  }\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Persist data\n   */\n\n\n  getPersistData() {\n    return this.addOnPersist([]);\n  }\n  /**\n   * To open/close DropDownButton popup based on current state of the DropDownButton.\n   *\n   * @returns {void}\n   */\n\n\n  toggle() {\n    if (this.canOpen()) {\n      this.openPopUp();\n    } else {\n      this.closePopup();\n    }\n  }\n  /**\n   * Initialize the Component rendering\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  render() {\n    this.initialize();\n\n    if (!this.disabled) {\n      this.wireEvents();\n    }\n\n    this.renderComplete();\n  }\n  /**\n   * Adds a new item to the menu. By default, new item appends to the list as the last item,\n   * but you can insert based on the text parameter.\n   *\n   * @param  { ItemModel[] } items - Specifies an array of JSON data.\n   * @param { string } text - Specifies the text to insert the newly added item in the menu.\n   * @returns {void}.\n   */\n\n\n  addItems(items, text) {\n    let newItem;\n    let idx = this.items.length;\n\n    for (let j = 0, len = this.items.length; j < len; j++) {\n      if (text === this.items[j].text) {\n        idx = j;\n        break;\n      }\n    }\n\n    for (let i = items.length - 1; i >= 0; i--) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      newItem = new Item(this, 'items', items[i], true);\n      this.items.splice(idx, 0, newItem);\n    }\n\n    if (!this.canOpen()) {\n      this.createItems();\n    }\n  }\n  /**\n   * Removes the items from the menu.\n   *\n   * @param  { string[] } items - Specifies an array of string to remove the items.\n   * @param { string } isUniqueId - Set `true` if specified items is a collection of unique id.\n   * @returns {void}.\n   */\n\n\n  removeItems(items, isUniqueId) {\n    let refresh = false;\n\n    for (let i = 0, len = items.length; i < len; i++) {\n      for (let j = 0, len = this.items.length; j < len; j++) {\n        if (items[i] === (isUniqueId ? this.items[j].id : this.items[j].text)) {\n          this.items.splice(j, 1);\n          refresh = true;\n          break;\n        }\n      }\n    }\n\n    if (refresh && this.getULElement()) {\n      this.createItems();\n    }\n  }\n\n  createPopup() {\n    const div = this.createElement('div', {\n      className: classNames.POPUP,\n      id: this.element.id + '-popup'\n    });\n    document.body.appendChild(div);\n    this.dropDown = new Popup(div, {\n      relateTo: this.element,\n      collision: {\n        X: 'fit',\n        Y: 'flip'\n      },\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      targetType: 'relative',\n      content: this.target ? this.getTargetElement() : '',\n      enableRtl: this.enableRtl\n    });\n\n    if (this.dropDown.element.style.position === 'fixed') {\n      this.dropDown.refreshPosition(this.element);\n    }\n\n    this.dropDown.hide();\n    attributes(this.element, {\n      ['aria-haspopup']: this.items.length || this.target ? 'true' : 'false',\n      ['aria-expanded']: 'false',\n      ['aria-owns']: this.getPopUpElement().id,\n      ['type']: 'button',\n      ['aria-label']: this.element.textContent + ' dropdownbutton'\n    });\n\n    if (this.cssClass) {\n      addClass([div], this.cssClass.split(' '));\n    }\n\n    this.isPopupCreated = true;\n  }\n\n  getTargetElement() {\n    return typeof this.target === 'string' ? select(this.target) : this.target;\n  }\n\n  createItems(appendItems) {\n    const items = this.items;\n    const showIcon = this.hasIcon(this.items, 'iconCss');\n    let span;\n    let item;\n    let li;\n    let eventArgs;\n    let ul = this.getULElement();\n\n    if (ul) {\n      ul.innerHTML = '';\n    } else {\n      ul = this.createElement('ul', {\n        attrs: {\n          'role': 'menu',\n          'tabindex': '0'\n        }\n      });\n    }\n\n    for (let i = 0; i < items.length; i++) {\n      item = items[i];\n      const tempItem = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(item.text) : item.text;\n      li = this.createElement('li', {\n        innerHTML: item.url ? '' : tempItem,\n        className: item.separator ? classNames.ITEM + ' ' + classNames.SEPARATOR : classNames.ITEM,\n        attrs: {\n          'role': 'menuItem',\n          'tabindex': '-1'\n        },\n        id: item.id ? item.id : getUniqueID('e-' + this.getModuleName() + '-item')\n      });\n\n      if (item.url) {\n        li.appendChild(this.createAnchor(item));\n        li.classList.add('e-url');\n      }\n\n      if (item.iconCss) {\n        span = this.createElement('span', {\n          className: classNames.ICON + ' ' + item.iconCss\n        });\n\n        if (item.url) {\n          li.childNodes[0].appendChild(span);\n        } else {\n          li.insertBefore(span, li.childNodes[0]);\n        }\n      } else {\n        if (showIcon && !item.separator) {\n          li.classList.add('e-blank-icon');\n        }\n      }\n\n      if (item.disabled) {\n        li.classList.add('e-disabled');\n      }\n\n      eventArgs = {\n        item: item,\n        element: li\n      };\n      this.trigger('beforeItemRender', eventArgs);\n      ul.appendChild(li);\n    }\n\n    if (appendItems) {\n      this.getPopUpElement().appendChild(ul);\n    }\n\n    if (showIcon) {\n      setBlankIconStyle(this.getPopUpElement());\n    }\n  }\n\n  hasIcon(items, field) {\n    for (let i = 0, len = items.length; i < len; i++) {\n      if (items[i][field]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  createAnchor(item) {\n    const tempItem = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(item.text) : item.text;\n    return this.createElement('a', {\n      className: 'e-menu-text e-menu-url',\n      innerHTML: tempItem,\n      attrs: {\n        'href': item.url\n      }\n    });\n  }\n\n  initialize() {\n    this.button = new Button({\n      iconCss: this.iconCss,\n      iconPosition: this.iconPosition,\n      cssClass: this.cssClass,\n      content: this.content,\n      disabled: this.disabled,\n      enableRtl: this.enableRtl,\n      enablePersistence: this.enablePersistence\n    });\n    this.button.createElement = this.createElement;\n    this.button.appendTo(this.element);\n\n    if (!this.element.id) {\n      this.element.id = getUniqueID('e-' + this.getModuleName());\n    }\n\n    this.appendArrowSpan();\n    this.setActiveElem([this.element]);\n\n    if (this.target && !this.isColorPicker() || !this.createPopupOnClick) {\n      this.createPopup();\n    } else {\n      this.isPopupCreated = false;\n    }\n  }\n\n  isColorPicker() {\n    if (!this.element) {\n      return false;\n    }\n\n    const prevElem = this.element.previousSibling;\n\n    if (prevElem && prevElem.classList && prevElem.classList.contains('e-split-colorpicker')) {\n      return true;\n    }\n\n    return false;\n  }\n\n  appendArrowSpan() {\n    this.element.appendChild(this.createElement('span', {\n      className: 'e-btn-icon e-icons ' + 'e-icon-' + (this.cssClass.indexOf(classNames.VERTICAL) > -1 ? 'bottom' : 'right') + ' e-caret'\n    }));\n  }\n\n  setActiveElem(elem) {\n    this.activeElem = elem;\n  }\n  /**\n   * Get component name.\n   *\n   * @returns {string} - Module Name\n   * @private\n   */\n\n\n  getModuleName() {\n    return 'dropdown-btn';\n  }\n\n  canOpen() {\n    let val = false;\n\n    if (this.isPopupCreated) {\n      val = this.getPopUpElement().classList.contains('e-popup-close');\n    }\n\n    return val;\n  }\n  /**\n   * Destroys the widget.\n   *\n   * @returns {void}\n   */\n\n\n  destroy() {\n    super.destroy();\n\n    if (this.getModuleName() === 'dropdown-btn') {\n      let classList$$1;\n\n      if (this.element.querySelector('span.e-caret')) {\n        detach(this.element.querySelector('span.e-caret'));\n      }\n\n      if (this.cssClass) {\n        classList$$1 = this.cssClass.split(' ');\n      }\n\n      this.button.destroy();\n\n      if (classList$$1) {\n        removeClass([this.element], classList$$1);\n      }\n\n      removeClass(this.activeElem, ['e-active']);\n      const attrList = this.element.getAttribute('class') ? ['aria-haspopup', 'aria-expanded', 'aria-owns', 'type'] : ['aria-haspopup', 'aria-expanded', 'aria-owns', 'type', 'class'];\n      attrList.forEach(key => {\n        this.element.removeAttribute(key);\n      });\n      this.popupUnWireEvents();\n      this.destroyPopup();\n      this.isPopupCreated = false;\n\n      if (!this.disabled) {\n        this.unWireEvents();\n      }\n    }\n  }\n\n  destroyPopup() {\n    if (this.isPopupCreated) {\n      this.dropDown.destroy();\n\n      if (this.getPopUpElement()) {\n        const popupEle = document.getElementById(this.getPopUpElement().id);\n\n        if (popupEle) {\n          removeClass([popupEle], ['e-popup-open', 'e-popup-close']);\n          detach(popupEle);\n        }\n      }\n\n      EventHandler.remove(this.getPopUpElement(), 'click', this.clickHandler);\n      EventHandler.remove(this.getPopUpElement(), 'keydown', this.keyBoardHandler);\n\n      if (this.isPopupCreated) {\n        this.dropDown = undefined;\n      }\n    }\n\n    this.isPopupCreated = false;\n  }\n\n  getPopUpElement() {\n    let val = null;\n\n    if (this.dropDown) {\n      val = this.dropDown.element;\n    }\n\n    return val;\n  }\n\n  getULElement() {\n    let val = null;\n\n    if (this.getPopUpElement()) {\n      val = this.getPopUpElement().children[0];\n    }\n\n    return val;\n  }\n\n  wireEvents() {\n    this.delegateMousedownHandler = this.mousedownHandler.bind(this);\n\n    if (!this.createPopupOnClick) {\n      EventHandler.add(document, 'mousedown touchstart', this.delegateMousedownHandler, this);\n    }\n\n    EventHandler.add(this.element, 'click', this.clickHandler, this);\n    EventHandler.add(this.element, 'keydown', this.keyBoardHandler, this);\n  }\n\n  popupWireEvents() {\n    const popupElement = this.getPopUpElement();\n\n    if (this.createPopupOnClick) {\n      EventHandler.add(document, 'mousedown touchstart', this.delegateMousedownHandler, this);\n    }\n\n    if (popupElement) {\n      EventHandler.add(popupElement, 'click', this.clickHandler, this);\n      EventHandler.add(popupElement, 'keydown', this.keyBoardHandler, this);\n    }\n\n    this.rippleFn = rippleEffect(popupElement, {\n      selector: '.' + classNames.ITEM\n    });\n  }\n\n  popupUnWireEvents() {\n    const popupElement = this.getPopUpElement();\n\n    if (this.createPopupOnClick) {\n      EventHandler.remove(document, 'mousedown touchstart', this.delegateMousedownHandler);\n    }\n\n    if (popupElement && popupElement.parentElement) {\n      EventHandler.remove(popupElement, 'click', this.clickHandler);\n      EventHandler.remove(popupElement, 'keydown', this.keyBoardHandler);\n    }\n  }\n  /**\n   * Handles the keyboard interactions.\n   *\n   * @param {KeyboardEventArgs} e - Specifies keyboard event args.\n   * @returns {void}\n   * @hidden\n   */\n\n\n  keyBoardHandler(e) {\n    if (e.target === this.element && (e.keyCode === 9 || !e.altKey && e.keyCode === 40 || e.keyCode === 38)) {\n      return;\n    }\n\n    switch (e.keyCode) {\n      case 38:\n      case 40:\n        if (e.altKey && (e.keyCode === 38 || e.keyCode === 40)) {\n          this.keyEventHandler(e);\n        } else {\n          this.upDownKeyHandler(e);\n        }\n\n        break;\n\n      case 9:\n      case 13:\n      case 27:\n      case 32:\n        this.keyEventHandler(e);\n        break;\n    }\n  }\n\n  upDownKeyHandler(e) {\n    if (this.target && (e.keyCode === 38 || e.keyCode === 40)) {\n      return;\n    }\n\n    e.preventDefault();\n    upDownKeyHandler(this.getULElement(), e.keyCode);\n  }\n\n  keyEventHandler(e) {\n    if (this.target && (e.keyCode === 13 || e.keyCode === 9)) {\n      return;\n    }\n\n    if (e.target && e.target.className.indexOf('e-edit-template') > -1 && e.keyCode === 32) {\n      return;\n    }\n\n    if (e.keyCode !== 9) {\n      e.preventDefault();\n    }\n\n    if (e.keyCode === 27 || e.keyCode === 38 || e.keyCode === 9) {\n      if (!this.canOpen()) {\n        this.closePopup(e, this.element);\n      }\n    } else {\n      this.clickHandler(e);\n    }\n  }\n\n  getLI(elem) {\n    return elem.tagName === 'LI' ? elem : closest(elem, 'li');\n  }\n\n  mousedownHandler(e) {\n    const trgt = e.target;\n\n    if (this.dropDown && !this.canOpen() && !(closest(trgt, '[id=\"' + this.getPopUpElement().id + '\"]') || closest(trgt, '[id=\"' + this.element.id + '\"]'))) {\n      this.closePopup(e);\n    }\n  }\n\n  clickHandler(e) {\n    const trgt = e.target;\n\n    if (closest(trgt, '[id=\"' + this.element.id + '\"]')) {\n      if (!this.createPopupOnClick || this.target && !this.isColorPicker()) {\n        if (this.getPopUpElement().classList.contains('e-popup-close')) {\n          this.openPopUp(e);\n        } else {\n          this.closePopup(e);\n        }\n      } else if (this.isPopupCreated) {\n        this.closePopup(e, this.activeElem[0]);\n      } else {\n        this.createPopup();\n        this.openPopUp(e);\n      }\n    } else {\n      if (closest(trgt, '[id=\"' + this.getPopUpElement().id + '\"]')) {\n        let eventArgs;\n        let liIdx;\n        let item;\n        const li = this.getLI(trgt);\n\n        if (li) {\n          liIdx = Array.prototype.indexOf.call(this.getULElement().children, li);\n          item = this.items[liIdx];\n\n          if (item) {\n            eventArgs = {\n              element: li,\n              item: item\n            };\n            this.trigger('select', eventArgs);\n          }\n\n          this.closePopup(e, this.activeElem[0]);\n        }\n      }\n    }\n  }\n\n  openPopUp(e = null) {\n    if (!this.target) {\n      this.createItems(true);\n    }\n\n    const ul = this.getULElement();\n    this.popupWireEvents();\n    const beforeOpenArgs = {\n      element: ul,\n      items: this.items,\n      event: e,\n      cancel: false\n    };\n    this.trigger('beforeOpen', beforeOpenArgs, observedArgs => {\n      if (!observedArgs.cancel) {\n        const ul = this.getULElement();\n        this.dropDown.show(null, this.element);\n        addClass([this.element], 'e-active');\n        this.element.setAttribute('aria-expanded', 'true');\n        ul.focus();\n        const openArgs = {\n          element: ul,\n          items: this.items\n        };\n        this.trigger('open', openArgs);\n      }\n    });\n  }\n\n  closePopup(e = null, focusEle) {\n    const ul = this.getULElement();\n    const beforeCloseArgs = {\n      element: ul,\n      items: this.items,\n      event: e,\n      cancel: false\n    };\n    let popupElement = this.getPopUpElement();\n\n    if (popupElement) {\n      EventHandler.remove(popupElement, 'keydown', this.keyBoardHandler);\n    }\n\n    this.trigger('beforeClose', beforeCloseArgs, observedArgs => {\n      if (!observedArgs.cancel) {\n        this.popupUnWireEvents();\n        const ul = this.getULElement();\n        const selectedLi = ul.querySelector('.e-selected');\n\n        if (selectedLi) {\n          selectedLi.classList.remove('e-selected');\n        }\n\n        this.dropDown.hide();\n        removeClass(this.activeElem, 'e-active');\n        this.element.setAttribute('aria-expanded', 'false');\n\n        if (focusEle) {\n          focusEle.focus();\n        }\n\n        const closeArgs = {\n          element: ul,\n          items: this.items\n        };\n        this.trigger('close', closeArgs);\n\n        if (!this.target && ul) {\n          detach(ul);\n        }\n\n        if (!this.target || this.isColorPicker()) {\n          if (this.createPopupOnClick) {\n            this.destroyPopup();\n          }\n        }\n\n        if (this.target) {\n          this.isPopupCreated = this.createPopupOnClick ? false : true;\n        }\n      }\n    });\n  }\n\n  unWireEvents() {\n    if (!this.createPopupOnClick) {\n      EventHandler.remove(document, 'mousedown touchstart', this.delegateMousedownHandler);\n    }\n\n    EventHandler.remove(this.element, 'click', this.clickHandler);\n    EventHandler.remove(this.element, 'keydown', this.keyBoardHandler);\n\n    if (this.isPopupCreated) {\n      EventHandler.remove(this.getPopUpElement(), 'click', this.clickHandler);\n      EventHandler.remove(this.getPopUpElement(), 'keydown', this.keyBoardHandler);\n    }\n  }\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param  {DropDownButtonModel} newProp - Specifies new properties\n   * @param  {DropDownButtonModel} oldProp - Specifies old properties\n   * @returns {void}\n   * @private\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    const btnModel = ['content', 'cssClass', 'iconCss', 'iconPosition', 'disabled', 'enableRtl'];\n    this.button.setProperties(getModel(newProp, btnModel));\n    let popupElement;\n\n    if (this.isPopupCreated) {\n      popupElement = this.getPopUpElement();\n      this.dropDown.setProperties(getModel(newProp, ['enableRtl']));\n    }\n\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'content':\n          if (!this.element.querySelector('span.e-caret')) {\n            this.appendArrowSpan();\n          }\n\n          break;\n\n        case 'disabled':\n          if (newProp.disabled) {\n            this.unWireEvents();\n\n            if (this.isPopupCreated && !this.canOpen()) {\n              this.closePopup();\n            }\n          } else {\n            this.wireEvents();\n          }\n\n          break;\n\n        case 'cssClass':\n          if (newProp.cssClass.indexOf(classNames.VERTICAL) > -1) {\n            const arrowSpan = this.element.querySelector('span.e-caret');\n            classList(arrowSpan, ['e-icon-bottom'], ['e-icon-right']);\n          }\n\n          if (this.isPopupCreated) {\n            if (oldProp.cssClass) {\n              removeClass([popupElement], oldProp.cssClass.split(' '));\n            }\n\n            if (newProp.cssClass) {\n              addClass([popupElement], newProp.cssClass.split(' '));\n            }\n          }\n\n          break;\n\n        case 'target':\n          this.dropDown.content = this.getTargetElement();\n          this.dropDown.dataBind();\n          break;\n\n        case 'items':\n          if (this.isPopupCreated && this.getULElement()) {\n            this.createItems();\n          }\n\n          break;\n\n        case 'createPopupOnClick':\n          if (newProp.createPopupOnClick) {\n            this.destroyPopup();\n          } else {\n            this.createPopup();\n          }\n\n          break;\n      }\n    }\n  }\n  /**\n   * Sets the focus to DropDownButton\n   * its native method\n   *\n   * @public\n   * @returns {void}\n   */\n\n\n  focusIn() {\n    this.element.focus();\n  }\n\n};\n\n__decorate$1([Property('')], DropDownButton.prototype, \"content\", void 0);\n\n__decorate$1([Property('')], DropDownButton.prototype, \"cssClass\", void 0);\n\n__decorate$1([Property(false)], DropDownButton.prototype, \"disabled\", void 0);\n\n__decorate$1([Property('')], DropDownButton.prototype, \"iconCss\", void 0);\n\n__decorate$1([Property('Left')], DropDownButton.prototype, \"iconPosition\", void 0);\n\n__decorate$1([Property(false)], DropDownButton.prototype, \"enableHtmlSanitizer\", void 0);\n\n__decorate$1([Collection([], Item)], DropDownButton.prototype, \"items\", void 0);\n\n__decorate$1([Property(false)], DropDownButton.prototype, \"createPopupOnClick\", void 0);\n\n__decorate$1([Property('')], DropDownButton.prototype, \"target\", void 0);\n\n__decorate$1([Event()], DropDownButton.prototype, \"beforeItemRender\", void 0);\n\n__decorate$1([Event()], DropDownButton.prototype, \"beforeOpen\", void 0);\n\n__decorate$1([Event()], DropDownButton.prototype, \"beforeClose\", void 0);\n\n__decorate$1([Event()], DropDownButton.prototype, \"close\", void 0);\n\n__decorate$1([Event()], DropDownButton.prototype, \"open\", void 0);\n\n__decorate$1([Event()], DropDownButton.prototype, \"select\", void 0);\n\n__decorate$1([Event()], DropDownButton.prototype, \"created\", void 0);\n\nDropDownButton = __decorate$1([NotifyPropertyChanges], DropDownButton);\n/**\n * DropDownButton modules\n */\n\nvar __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; // eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-button/drop-down-button-model.d.ts'/>\n\n\nconst RTL = 'e-rtl';\nconst TAGNAME = 'EJS-SPLITBUTTON';\n/**\n * SplitButton component has primary and secondary button. Primary button is used to select\n * default action and secondary button is used to toggle contextual overlays for displaying list of\n * action items. It can contain both text and images.\n * ```html\n * <button id=\"element\"></button>\n * ```\n * ```typescript\n * <script>\n * var splitBtnObj = new SplitButton({content: 'SplitButton'});\n * splitBtnObj.appendTo(\"#element\");\n * </script>\n * ```\n */\n\nlet SplitButton = class SplitButton extends DropDownButton {\n  /**\n   * Constructor for creating the widget\n   *\n   * @param  {SplitButtonModel} options - Specifies the splitbutton model\n   * @param  {string|HTMLButtonElement} element - Specifies the element\n   * @hidden\n   */\n  constructor(options, element) {\n    super(options, element);\n  }\n  /**\n   * Initialize Angular support.\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  preRender() {\n    let ele = this.element;\n\n    if (ele.tagName === TAGNAME) {\n      const ejInstance = getValue('ej2_instances', ele);\n      const btn = this.createElement('button', {\n        attrs: {\n          'type': 'button'\n        }\n      });\n      const wrapper = this.createElement(TAGNAME, {\n        className: 'e-' + this.getModuleName() + '-wrapper'\n      });\n\n      for (let idx = 0, len = ele.attributes.length; idx < len; idx++) {\n        btn.setAttribute(ele.attributes[idx].nodeName, ele.attributes[idx].nodeValue);\n      }\n\n      ele.parentNode.insertBefore(wrapper, ele);\n      detach(ele);\n      ele = btn;\n      wrapper.appendChild(ele);\n      setValue('ej2_instances', ejInstance, ele);\n      this.wrapper = wrapper;\n      this.element = ele;\n    }\n\n    if (!this.element.id) {\n      this.element.id = getUniqueID('e-' + this.getModuleName());\n    }\n  }\n  /**\n   * Initialize the Component rendering.\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  render() {\n    this.initWrapper();\n    this.createPrimaryButton();\n    this.renderControl();\n  }\n\n  renderControl() {\n    this.createSecondaryButton();\n    this.setActiveElem([this.element, this.secondaryBtnObj.element]);\n    this.setAria();\n    this.wireEvents();\n    this.renderComplete();\n  }\n  /**\n   * Adds a new item to the menu. By default, new item appends to the list as the last item,\n   * but you can insert based on the text parameter.\n   *\n   * @param  { ItemModel[] } items - Specifies an array of JSON data.\n   * @param { string } text - Specifies the text to insert the newly added item in the menu.\n   * @returns {void}.\n   */\n\n\n  addItems(items, text) {\n    super.addItems(items, text);\n    this.secondaryBtnObj.items = this.items;\n  }\n  /**\n   * Removes the items from the menu.\n   *\n   * @param  { string[] } items - Specifies an array of string to remove the items.\n   * @param { string } isUniqueId - Set `true` if specified items is a collection of unique id.\n   * @returns {void}.\n   */\n\n\n  removeItems(items, isUniqueId) {\n    super.removeItems(items, isUniqueId);\n    this.secondaryBtnObj.items = this.items;\n  }\n\n  initWrapper() {\n    if (!this.wrapper) {\n      this.wrapper = this.createElement('div', {\n        className: 'e-' + this.getModuleName() + '-wrapper'\n      });\n      this.element.parentNode.insertBefore(this.wrapper, this.element);\n    }\n\n    this.element.classList.remove('e-' + this.getModuleName());\n\n    if (this.enableRtl) {\n      this.wrapper.classList.add(RTL);\n    }\n\n    if (this.cssClass) {\n      addClass([this.wrapper], this.cssClass.split(' '));\n    }\n  }\n\n  createPrimaryButton() {\n    const btnModel = {\n      cssClass: this.cssClass,\n      enableRtl: this.enableRtl,\n      iconCss: this.iconCss,\n      iconPosition: this.iconPosition,\n      content: this.content,\n      disabled: this.disabled\n    };\n    this.primaryBtnObj = new Button(btnModel);\n    this.primaryBtnObj.createElement = this.createElement;\n    this.primaryBtnObj.appendTo(this.element);\n    this.element.classList.add('e-' + this.getModuleName());\n    this.element.type = 'button';\n    this.wrapper.appendChild(this.element);\n  }\n\n  createSecondaryButton() {\n    const btnElem = this.createElement('button', {\n      className: 'e-icon-btn',\n      attrs: {\n        'tabindex': '-1'\n      },\n      id: this.element.id + '_dropdownbtn'\n    });\n    this.wrapper.appendChild(btnElem);\n    const dropDownBtnModel = {\n      cssClass: this.cssClass,\n      disabled: this.disabled,\n      enableRtl: this.enableRtl,\n      items: this.items,\n      target: this.target,\n      createPopupOnClick: this.createPopupOnClick\n    };\n\n    dropDownBtnModel.beforeItemRender = args => {\n      if (this.createPopupOnClick) {\n        this.secondaryBtnObj.dropDown.relateTo = this.wrapper;\n        this.dropDown = this.secondaryBtnObj.dropDown;\n      }\n\n      this.trigger('beforeItemRender', args);\n    };\n\n    dropDownBtnModel.open = args => {\n      this.trigger('open', args);\n    };\n\n    dropDownBtnModel.close = args => {\n      this.trigger('close', args);\n    };\n\n    dropDownBtnModel.select = args => {\n      this.trigger('select', args);\n    };\n\n    dropDownBtnModel.beforeOpen = args => {\n      const callBackPromise = new Deferred();\n      this.trigger('beforeOpen', args, observedArgs => {\n        callBackPromise.resolve(observedArgs);\n      });\n      return callBackPromise;\n    };\n\n    dropDownBtnModel.beforeClose = args => {\n      const callBackPromise = new Deferred();\n      this.trigger('beforeClose', args, observedArgs => {\n        callBackPromise.resolve(observedArgs);\n      });\n      return callBackPromise;\n    };\n\n    this.secondaryBtnObj = new DropDownButton(dropDownBtnModel);\n    this.secondaryBtnObj.createElement = this.createElement;\n    this.secondaryBtnObj.appendTo(btnElem);\n\n    if (!this.createPopupOnClick) {\n      this.secondaryBtnObj.dropDown.relateTo = this.wrapper;\n      this.dropDown = this.secondaryBtnObj.dropDown;\n    }\n\n    this.secondaryBtnObj.activeElem = [this.element, this.secondaryBtnObj.element];\n    this.secondaryBtnObj.element.querySelector('.e-btn-icon').classList.remove('e-icon-right');\n  }\n\n  setAria() {\n    attributes(this.element, {\n      'aria-expanded': 'false',\n      'aria-haspopup': 'true',\n      'aria-label': this.element.textContent + ' splitbutton',\n      'aria-owns': this.element.id + '_dropdownbtn-popup'\n    });\n  }\n  /**\n   * Get component name.\n   *\n   * @returns {string} - Module Name\n   * @private\n   */\n\n\n  getModuleName() {\n    return 'split-btn';\n  }\n  /**\n   * To open/close SplitButton popup based on current state of the SplitButton.\n   *\n   * @returns {void}\n   */\n\n\n  toggle() {\n    this.secondaryBtnObj.toggle();\n  }\n\n  destroy() {\n    let classList$$1 = [RTL];\n\n    if (this.cssClass) {\n      classList$$1 = classList$$1.concat(this.cssClass.split(' '));\n    }\n\n    if (this.element) {\n      const element = document.getElementById(this.element.id);\n\n      if (element && element.parentElement === this.wrapper) {\n        if (this.wrapper.tagName === TAGNAME) {\n          this.wrapper.innerHTML = '';\n          removeClass([this.wrapper], ['e-rtl', 'e-' + this.getModuleName() + '-wrapper']);\n          removeClass([this.wrapper], this.cssClass.split(' '));\n        } else {\n          removeClass([this.element], classList$$1);\n          ['aria-label', 'aria-haspopup', 'aria-expanded', 'aria-owns', 'type'].forEach(key => {\n            this.element.removeAttribute(key);\n          });\n          this.wrapper.parentNode.insertBefore(this.element, this.wrapper);\n          remove(this.wrapper);\n        }\n\n        this.unWireEvents();\n      }\n    }\n\n    this.primaryBtnObj.destroy();\n    this.secondaryBtnObj.destroy();\n    super.destroy();\n\n    if (!this.element.getAttribute('class')) {\n      this.element.removeAttribute('class');\n    }\n  }\n\n  wireEvents() {\n    EventHandler.add(this.element, 'click', this.primaryBtnClickHandler, this);\n    new KeyboardEvents(this.element, {\n      keyAction: this.btnKeyBoardHandler.bind(this),\n      keyConfigs: {\n        altdownarrow: 'alt+downarrow'\n      }\n    });\n  }\n\n  unWireEvents() {\n    EventHandler.remove(this.element, 'click', this.primaryBtnClickHandler);\n    getInstance(this.element, KeyboardEvents).destroy();\n  }\n\n  primaryBtnClickHandler() {\n    this.trigger('click', {\n      element: this.element\n    });\n  }\n\n  btnKeyBoardHandler(e) {\n    switch (e.action) {\n      case 'altdownarrow':\n        this.clickHandler(e);\n        break;\n    }\n  }\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param  {SplitButtonModel} newProp - Specifies new properties\n   * @param  {SplitButtonModel} oldProp - Specifies old properties\n   * @returns {void}\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    let model = ['content', 'iconCss', 'iconPosition', 'cssClass', 'disabled', 'enableRtl'];\n    this.primaryBtnObj.setProperties(getModel(newProp, model));\n    model = ['beforeOpen', 'beforeItemRender', 'select', 'open', 'close', 'cssClass', 'disabled', 'enableRtl', 'createPopupOnClick'];\n\n    if (Object.keys(newProp).indexOf('items') > -1) {\n      this.secondaryBtnObj.items = newProp.items;\n      this.secondaryBtnObj.dataBind();\n    }\n\n    this.secondaryBtnObj.setProperties(getModel(newProp, model));\n\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([this.wrapper], oldProp.cssClass.split(' '));\n          }\n\n          addClass([this.wrapper], newProp.cssClass.split(' '));\n          break;\n\n        case 'enableRtl':\n          if (newProp.enableRtl) {\n            addClass([this.wrapper], RTL);\n          } else {\n            removeClass([this.wrapper], RTL);\n          }\n\n          break;\n      }\n    }\n  }\n  /**\n   * Sets the focus to SplitButton\n   * its native method\n   *\n   * @public\n   * @returns {void}\n   */\n\n\n  focusIn() {\n    this.element.focus();\n  }\n\n};\n\n__decorate$2([Property('')], SplitButton.prototype, \"content\", void 0);\n\n__decorate$2([Property('')], SplitButton.prototype, \"cssClass\", void 0);\n\n__decorate$2([Property(false)], SplitButton.prototype, \"disabled\", void 0);\n\n__decorate$2([Property('')], SplitButton.prototype, \"iconCss\", void 0);\n\n__decorate$2([Property('Left')], SplitButton.prototype, \"iconPosition\", void 0);\n\n__decorate$2([Property(false)], SplitButton.prototype, \"createPopupOnClick\", void 0);\n\n__decorate$2([Collection([], Item)], SplitButton.prototype, \"items\", void 0);\n\n__decorate$2([Property('')], SplitButton.prototype, \"target\", void 0);\n\n__decorate$2([Event()], SplitButton.prototype, \"beforeItemRender\", void 0);\n\n__decorate$2([Event()], SplitButton.prototype, \"beforeOpen\", void 0);\n\n__decorate$2([Event()], SplitButton.prototype, \"beforeClose\", void 0);\n\n__decorate$2([Event()], SplitButton.prototype, \"click\", void 0);\n\n__decorate$2([Event()], SplitButton.prototype, \"close\", void 0);\n\n__decorate$2([Event()], SplitButton.prototype, \"open\", void 0);\n\n__decorate$2([Event()], SplitButton.prototype, \"select\", void 0);\n\n__decorate$2([Event()], SplitButton.prototype, \"created\", void 0);\n\nSplitButton = __decorate$2([NotifyPropertyChanges], SplitButton);\n/**\n * Deferred is used to handle asynchronous operation.\n */\n\nclass Deferred {\n  constructor() {\n    /**\n     * Promise is an object that represents a value that may not be available yet, but will be resolved at some point in the future.\n     */\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n    /**\n     * Defines the callback function triggers when the Deferred object is rejected.\n     */\n\n    this.catch = this.promise.catch.bind(this.promise);\n    /**\n     * Defines the callback function triggers when the Deferred object is resolved.\n     */\n\n    this.then = this.promise.then.bind(this.promise);\n  }\n\n}\n/**\n * Split Button modules\n */\n\n/**\n * Initialize ButtonGroup CSS component with specified properties.\n * ```html\n * <div id='buttongroup'>\n * <button></button>\n * <button></button>\n * <button></button>\n * </div>\n * ```\n * ```typescript\n * createButtonGroup('#buttongroup', {\n *   cssClass: 'e-outline',\n *   buttons: [\n *       { content: 'Day' },\n *       { content: 'Week' },\n *       { content: 'Work Week'}\n *   ]\n * });\n * ```\n *\n * @param {string} selector\n * @param {CreateButtonGroupModel} options\n * @returns HTMLElement\n */\n\n/**\n * Creates button group.\n *\n * @param {string} selector - Specifies the selector.\n * @param {CreateButtonGroupModel} options - Specifies the button group model.\n * @param {Function} createElement - Specifies the element.\n * @returns {HTMLElement} - Button group element.\n */\n\n\nfunction createButtonGroup(selector, options = {}, createElement$$1) {\n  let child;\n  let btnElem;\n  let nextChild;\n  let btnModel;\n\n  if (isNullOrUndefined(createElement$$1)) {\n    createElement$$1 = createElement;\n  }\n\n  const wrapper = document.querySelector(selector);\n  addClass([wrapper], ['e-btn-group', 'e-css']);\n  wrapper.setAttribute('role', 'group');\n  const childs = wrapper.children;\n  options.buttons = options.buttons || [];\n\n  for (let i = 0, j = 0; j < childs.length; i++, j++) {\n    child = childs[j];\n    btnModel = options.buttons[i];\n\n    if (btnModel !== null) {\n      if (child.tagName === 'BUTTON') {\n        btnElem = child;\n      } else {\n        btnElem = createElement$$1('label');\n        nextChild = childs[j + 1];\n\n        if (nextChild) {\n          wrapper.insertBefore(btnElem, nextChild);\n        } else {\n          wrapper.appendChild(btnElem);\n        }\n\n        if (child.id) {\n          btnElem.setAttribute('for', child.id);\n        }\n\n        if (btnModel && btnModel.disabled) {\n          child.disabled = true;\n        }\n\n        j++;\n      }\n\n      if (options.cssClass && btnModel && !btnModel.cssClass) {\n        btnModel.cssClass = options.cssClass;\n      }\n\n      new Button(btnModel || {}, btnElem);\n    }\n  }\n\n  return wrapper;\n}\n/**\n * ButtonGroup modules\n */\n\n\nvar __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nconst HIDESPINNER = 'e-hide-spinner';\nconst PROGRESS = 'e-progress';\nconst PROGRESSACTIVE = 'e-progress-active';\nconst CONTENTCLS = 'e-btn-content';\n/**\n * Defines the spin settings.\n */\n\nclass SpinSettings extends ChildProperty {}\n\n__decorate$3([Property(null)], SpinSettings.prototype, \"template\", void 0);\n\n__decorate$3([Property(16)], SpinSettings.prototype, \"width\", void 0);\n\n__decorate$3([Property('Left')], SpinSettings.prototype, \"position\", void 0);\n/**\n * Defines the animation settings.\n */\n\n\nclass AnimationSettings extends ChildProperty {}\n\n__decorate$3([Property(400)], AnimationSettings.prototype, \"duration\", void 0);\n\n__decorate$3([Property('None')], AnimationSettings.prototype, \"effect\", void 0);\n\n__decorate$3([Property('ease')], AnimationSettings.prototype, \"easing\", void 0);\n/**\n * The ProgressButton visualizes the progression of an operation to indicate the user\n * that a process is happening in the background with visual representation.\n * ```html\n * <button id=\"element\"></button>\n * ```\n * ```typescript\n * <script>\n * var progressButtonObj = new ProgressButton({ content: 'Progress Button' });\n * progressButtonObj.appendTo(\"#element\");\n * </script>\n * ```\n */\n\n\nlet ProgressButton = class ProgressButton extends Button {\n  /**\n   * Constructor for creating the widget.\n   *\n   * @param  {ProgressButtonModel} options - Specifies progress button model\n   * @param  {string|HTMLButtonElement} element - Specifies element\n   */\n  constructor(options, element) {\n    super(options, element);\n    this.step = 1;\n  }\n\n  preRender() {\n    super.preRender();\n  }\n  /**\n   * Initialize the Component rendering\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  render() {\n    super.render();\n    this.init();\n    this.wireEvents();\n    this.setAria();\n    this.renderComplete();\n  }\n  /**\n   * Starts the button progress at the specified percent.\n   *\n   * @param {number} percent - Starts the button progress at this percent.\n   * @returns {void}\n   */\n\n\n  start(percent) {\n    this.isPaused = false;\n    this.startProgress(percent ? percent : this.percent, this.progressTime);\n  }\n  /**\n   * Stops the button progress.\n   *\n   * @returns {void}\n   */\n\n\n  stop() {\n    this.isPaused = true;\n    cancelAnimationFrame(this.timerId);\n  }\n  /**\n   * Complete the button progress.\n   *\n   * @returns {void}\n   */\n\n\n  progressComplete() {\n    this.isPaused = false;\n    this.finishProgress();\n  }\n  /**\n   * Get component name.\n   *\n   * @returns {string} - Module Name\n   * @private\n   */\n\n\n  getModuleName() {\n    return 'progress-btn';\n  }\n  /**\n   * Destroys the widget.\n   *\n   * @returns {void}\n   */\n\n\n  destroy() {\n    let classList$$1 = [HIDESPINNER, PROGRESSACTIVE, 'e-round-corner', 'e-' + super.getModuleName(), 'e-spin-' + this.spinSettings.position.toLowerCase()];\n    super.destroy();\n    this.unWireEvents();\n    this.element.innerHTML = '';\n\n    if (this.cssClass) {\n      classList$$1 = classList$$1.concat(this.cssClass.split(' '));\n    }\n\n    removeClass([this.element], classList$$1);\n    const css = this.element.getAttribute('class') ? ['aria-label', 'aria-valuemin', 'aria-valuemax', 'aria-valuenow'] : ['aria-label', 'aria-valuemin', 'aria-valuemax', 'aria-valuenow', 'class'];\n    css.forEach(key => {\n      this.element.removeAttribute(key);\n    });\n\n    if (this.disabled) {\n      this.element.removeAttribute('disabled');\n    }\n  }\n\n  init() {\n    this.element.classList.add('e-' + super.getModuleName());\n    this.setContent();\n    this.createSpinner();\n\n    if (this.enableProgress) {\n      this.createProgress();\n    }\n  }\n\n  createSpinner() {\n    const spinner = this.createElement('span', {\n      className: 'e-spinner'\n    });\n    this.setSpinPosition(spinner);\n    createSpinner({\n      target: spinner,\n      width: this.spinSettings.width || 16,\n      template: this.spinSettings.template\n    }, this.createElement);\n  }\n\n  getSpinner() {\n    return this.element.getElementsByClassName('e-spinner')[0];\n  }\n\n  getProgress() {\n    return this.element.getElementsByClassName(PROGRESS)[0];\n  }\n\n  setSpinPosition(ele) {\n    const position = this.spinSettings.position || 'Left';\n\n    if (position === 'Left' || position === 'Top') {\n      this.element.insertBefore(ele, this.element.getElementsByClassName(CONTENTCLS)[0]);\n    } else {\n      this.element.appendChild(ele);\n    }\n\n    this.element.classList.add('e-spin-' + position.toLowerCase());\n  }\n\n  createProgress() {\n    this.element.appendChild(this.createElement('span', {\n      className: PROGRESS\n    }));\n  }\n\n  setContent() {\n    let cont;\n    cont = this.element.innerHTML;\n\n    if (this.enableHtmlSanitizer) {\n      cont = SanitizeHtmlHelper.sanitize(this.element.innerHTML);\n    }\n\n    this.element.innerHTML = '';\n    this.element.appendChild(this.createElement('span', {\n      className: CONTENTCLS,\n      innerHTML: cont\n    }));\n  }\n\n  setContentIcon(content) {\n    const contElem = this.createElement('span', {\n      className: CONTENTCLS,\n      innerHTML: content\n    });\n\n    if (this.iconCss) {\n      const span = this.createElement('span', {\n        className: 'e-btn-icon ' + this.iconCss\n      });\n\n      if (!this.element.textContent.trim()) {\n        this.element.classList.add('e-icon-btn');\n      } else {\n        span.classList.add('e-icon-' + this.iconPosition.toLowerCase());\n\n        if (this.iconPosition === 'Top' || this.iconPosition === 'Bottom') {\n          this.element.classList.add('e-' + this.iconPosition.toLowerCase() + '-icon-btn');\n        }\n      }\n\n      const node = contElem.childNodes[0];\n\n      if (node && (this.iconPosition === 'Left' || this.iconPosition === 'Top')) {\n        contElem.insertBefore(span, node);\n      } else {\n        contElem.appendChild(span);\n      }\n    }\n\n    this.element.appendChild(contElem);\n  }\n\n  clickHandler() {\n    if (this.element.classList.contains(PROGRESSACTIVE)) {\n      return;\n    }\n\n    this.startProgress();\n  }\n\n  startProgress(percent, progressTime) {\n    const clsList = this.element.classList;\n    const isVertical = clsList.contains('e-vertical');\n    clsList.add(PROGRESSACTIVE);\n\n    if (!clsList.contains(HIDESPINNER)) {\n      showSpinner(this.element);\n    }\n\n    this.startAnimate(Date.now(), progressTime ? progressTime : 0, progressTime ? Date.now() - this.duration * 1 / 100 : Date.now(), percent ? percent : 0, 0, this.step, 0, isVertical);\n    this.startContAnimate();\n  }\n\n  startAnimate(timestamp, progressTime, prevTime, percent, prevPercent, step, prevProgressTime, isVertical) {\n    try {\n      const timeDiff = timestamp - prevTime;\n      const stepTime = this.duration * step / 100;\n      const timeDiffBuffer = timeDiff ? timeDiff < stepTime ? timeDiff - stepTime : timeDiff % stepTime : 0;\n      this.progressTime = progressTime = progressTime + timeDiff - timeDiffBuffer;\n      prevTime = timestamp - timeDiffBuffer;\n      percent = percent + (timeDiff - timeDiffBuffer) / this.duration * 100;\n      prevPercent = (progressTime - prevProgressTime) % stepTime === 0 || percent === 100 ? percent : prevPercent;\n      const args = {\n        percent: prevPercent,\n        currentDuration: progressTime,\n        step: step\n      };\n      this.eIsVertical = isVertical;\n\n      if (percent === 0) {\n        this.trigger('begin', args, observedArgs => {\n          this.successCallback(observedArgs, percent, prevPercent, progressTime, prevProgressTime, timeDiffBuffer, prevTime);\n        });\n      } else if (percent === 100 || progressTime === this.duration) {\n        this.trigger('end', args, observedArgs => {\n          this.successCallback(observedArgs, percent, prevPercent, progressTime, prevProgressTime, timeDiffBuffer, prevTime);\n        });\n      } else {\n        this.trigger('progress', args, observedArgs => {\n          this.successCallback(observedArgs, percent, prevPercent, progressTime, prevProgressTime, timeDiffBuffer, prevTime);\n        });\n      }\n    } catch (e) {\n      cancelAnimationFrame(this.timerId);\n      this.trigger('fail', e);\n    }\n  }\n\n  successCallback(args, perc, pPerc, prgTim, pPrgTim, timDif, pTim) {\n    let percent = perc;\n    let prevPercent = pPerc;\n    const timeDiffBuffer = timDif;\n    const progressTime = prgTim;\n    let prevProgressTime = pPrgTim;\n    const prevTime = pTim;\n    const isVertical = this.eIsVertical;\n\n    if (percent !== args.percent && args.percent !== prevPercent) {\n      percent = args.percent;\n    }\n\n    this.percent = percent;\n    this.step = args.step;\n\n    if ((progressTime - prevProgressTime) % (this.duration * args.step / 100) === 0 || percent === 100) {\n      this.timerId = requestAnimationFrame(() => {\n        if (this.enableProgress) {\n          this.getProgress().style[isVertical ? 'height' : 'width'] = percent + '%';\n        }\n\n        this.element.setAttribute('aria-valuenow', percent.toString());\n      });\n      prevPercent = percent;\n      prevProgressTime = progressTime;\n    }\n\n    if (!this.isPaused) {\n      if (progressTime < this.duration && percent < 100) {\n        this.interval = window.setTimeout(() => {\n          this.startAnimate(Date.now(), progressTime, prevTime, percent, prevPercent, args.step, prevProgressTime, isVertical);\n        }, this.duration / 100 - timeDiffBuffer);\n      } else {\n        this.interval = window.setTimeout(() => {\n          this.progressTime = this.percent = 0;\n\n          if (this.enableProgress) {\n            this.getProgress().style[isVertical ? 'height' : 'width'] = '0%';\n          }\n\n          this.element.setAttribute('aria-valuenow', '0');\n          this.hideSpin();\n        }, 100);\n      }\n    }\n  }\n\n  startContAnimate() {\n    const ele = this.element.getElementsByClassName(CONTENTCLS)[0];\n\n    if (this.animationSettings.effect !== 'None') {\n      new Animation({}).animate(ele, {\n        duration: this.animationSettings.duration,\n        name: 'Progress' + this.animationSettings.effect,\n        timingFunction: this.animationSettings.easing,\n        begin: () => {\n          if (this.spinSettings.position === 'Center') {\n            this.setSpinnerSize();\n          }\n        },\n        end: () => {\n          ele.classList.add('e-animate-end');\n        }\n      });\n    } else if (this.spinSettings.position === 'Center') {\n      this.setSpinnerSize();\n    }\n  }\n\n  finishProgress() {\n    const clsList = this.element.classList;\n    const isVertical = clsList.contains('e-vertical');\n    clsList.add(PROGRESSACTIVE);\n    const count = 100;\n\n    for (let i = this.percent; i < count; i++) {\n      i += 10;\n\n      if (i > 100) {\n        i = 100;\n      }\n\n      if (this.enableProgress) {\n        this.getProgress().style[isVertical ? 'height' : 'width'] = this.percent < 100 ? i + '%' : '100%';\n      }\n    }\n\n    this.element.setAttribute('aria-valuenow', '0');\n    this.hideSpin();\n    const args = {\n      step: this.step,\n      currentDuration: this.progressTime,\n      percent: 100\n    };\n    clearTimeout(this.interval);\n    this.trigger('end', args);\n    this.progressTime = this.percent = 0;\n  }\n\n  setSpinnerSize() {\n    const ele = this.element.getElementsByClassName(CONTENTCLS)[0];\n    const spinner = this.getSpinner();\n    spinner.style.width = Math.max(spinner.offsetWidth, ele.offsetWidth) + 'px';\n    spinner.style.height = Math.max(spinner.offsetHeight, ele.offsetHeight) + 'px';\n    ele.classList.add('e-cont-animate');\n  }\n\n  hideSpin() {\n    const cont = this.element.getElementsByClassName(CONTENTCLS)[0];\n\n    if (!this.element.classList.contains(HIDESPINNER)) {\n      hideSpinner(this.element);\n    }\n\n    this.element.classList.remove(PROGRESSACTIVE);\n\n    if (this.animationSettings.effect !== 'None') {\n      cont.classList.remove('e-animate-end');\n    }\n\n    if (this.spinSettings.position === 'Center') {\n      const ele = this.getSpinner();\n      cont.classList.remove('e-cont-animate');\n      ele.style.width = 'auto';\n      ele.style.height = 'auto';\n    }\n  }\n\n  setIconSpan() {\n    const cont = this.element.getElementsByClassName(CONTENTCLS)[0];\n    const iconSpan = this.element.getElementsByClassName('e-btn-icon')[0];\n\n    if (cont.childNodes[0] && (this.iconPosition === 'Left' || this.iconPosition === 'Top')) {\n      cont.insertBefore(iconSpan, cont.childNodes[0]);\n    } else {\n      cont.appendChild(iconSpan);\n    }\n  }\n\n  setAria() {\n    attributes(this.element, {\n      'aria-label': this.element.textContent + ' progress',\n      'aria-valuemin': '0',\n      'aria-valuemax': '100',\n      'aria-valuenow': '0'\n    });\n  }\n\n  wireEvents() {\n    EventHandler.add(this.element, 'click', this.clickHandler, this);\n  }\n\n  unWireEvents() {\n    EventHandler.remove(this.element, 'click', this.clickHandler);\n  }\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param  {ProgressButtonModel} newProp - Specifies new properties\n   * @param  {ProgressButtonModel} oldProp - Specifies old properties\n   * @returns {void}\n   * @private\n   */\n\n\n  onPropertyChanged(newProp, oldProp) {\n    const ele = this.element;\n    let isSpinning = false;\n    const clsList = this.element.querySelector('.e-spinner-pane').classList;\n\n    if (clsList.contains('e-spin-show')) {\n      isSpinning = true;\n    }\n\n    super.onPropertyChanged(newProp, oldProp);\n\n    for (const prop of Object.keys(newProp)) {\n      switch (prop) {\n        case 'content':\n          this.setContent();\n          this.createSpinner();\n\n          if (isSpinning) {\n            showSpinner(this.element);\n            isSpinning = false;\n          }\n\n          if (this.enableProgress) {\n            this.createProgress();\n          }\n\n          ele.setAttribute('aria-label', ele.textContent + ' progress');\n          break;\n\n        case 'iconCss':\n          if (!oldProp.iconCss) {\n            this.setIconSpan();\n          }\n\n          break;\n\n        case 'iconPosition':\n          this.setIconSpan();\n          break;\n\n        case 'enableProgress':\n          if (newProp.enableProgress) {\n            this.createProgress();\n          } else {\n            remove(this.getProgress());\n          }\n\n          break;\n\n        case 'spinSettings':\n          if (newProp.spinSettings.position) {\n            ele.classList.remove('e-spin-' + oldProp.spinSettings.position.toLowerCase());\n            this.setSpinPosition(this.getSpinner());\n          }\n\n          if (newProp.spinSettings.template || newProp.spinSettings.width) {\n            ele.removeChild(this.getSpinner());\n            this.createSpinner();\n          }\n\n          break;\n      }\n    }\n  }\n  /**\n   * Sets the focus to ProgressButton\n   * its native method\n   *\n   * @public\n   * @returns {void}\n   */\n\n\n  focusIn() {\n    this.element.focus();\n  }\n\n};\n\n__decorate$3([Property(false)], ProgressButton.prototype, \"enableProgress\", void 0);\n\n__decorate$3([Property(2000)], ProgressButton.prototype, \"duration\", void 0);\n\n__decorate$3([Property('Left')], ProgressButton.prototype, \"iconPosition\", void 0);\n\n__decorate$3([Property('')], ProgressButton.prototype, \"iconCss\", void 0);\n\n__decorate$3([Property(false)], ProgressButton.prototype, \"disabled\", void 0);\n\n__decorate$3([Property(false)], ProgressButton.prototype, \"isPrimary\", void 0);\n\n__decorate$3([Property('')], ProgressButton.prototype, \"cssClass\", void 0);\n\n__decorate$3([Property('')], ProgressButton.prototype, \"content\", void 0);\n\n__decorate$3([Property(false)], ProgressButton.prototype, \"isToggle\", void 0);\n\n__decorate$3([Property(false)], ProgressButton.prototype, \"enableHtmlSanitizer\", void 0);\n\n__decorate$3([Complex({}, SpinSettings)], ProgressButton.prototype, \"spinSettings\", void 0);\n\n__decorate$3([Complex({}, AnimationSettings)], ProgressButton.prototype, \"animationSettings\", void 0);\n\n__decorate$3([Event()], ProgressButton.prototype, \"created\", void 0);\n\n__decorate$3([Event()], ProgressButton.prototype, \"begin\", void 0);\n\n__decorate$3([Event()], ProgressButton.prototype, \"progress\", void 0);\n\n__decorate$3([Event()], ProgressButton.prototype, \"end\", void 0);\n\n__decorate$3([Event()], ProgressButton.prototype, \"fail\", void 0);\n\nProgressButton = __decorate$3([NotifyPropertyChanges], ProgressButton);\n/**\n * ProgressButton modules\n */\n\n/**\n * SplitButton all module\n */\n\nexport { getModel, upDownKeyHandler, setBlankIconStyle, Item, DropDownButton, SplitButton, Deferred, createButtonGroup, SpinSettings, AnimationSettings, ProgressButton };","map":{"version":3,"sources":["/home/harawat/Downloads/Projects/freelancer/resources/frontend/angular/node_modules/@syncfusion/ej2-splitbuttons/dist/es6/ej2-splitbuttons.es2015.js"],"names":["Animation","ChildProperty","Collection","Complex","Component","Event","EventHandler","KeyboardEvents","NotifyPropertyChanges","Property","SanitizeHtmlHelper","addClass","attributes","classList","closest","createElement","deleteObject","detach","extend","getInstance","getUniqueID","getValue","isNullOrUndefined","remove","removeClass","rippleEffect","select","setValue","Button","Popup","createSpinner","hideSpinner","showSpinner","__decorate","undefined","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","getModel","props","model","obj","prop","keys","indexOf","upDownKeyHandler","ul","keyCode","defaultIdx","childElementCount","liIdx","li","selectedLi","querySelector","len","children","contains","isValidLI","focus","index","count","setBlankIconStyle","popup","blankIconList","slice","call","getElementsByClassName","iconLi","icon","cssProp","enableRtl","padding","margin","size","parseInt","getComputedStyle","fontSize","paddingLeft","forEach","style","Item","prototype","__decorate$1","classNames","DISABLED","FOCUS","ICON","ITEM","POPUP","RTL","SEPARATOR","VERTICAL","DropDownButton","constructor","options","element","isPopupCreated","preRender","getPersistData","addOnPersist","toggle","canOpen","openPopUp","closePopup","render","initialize","disabled","wireEvents","renderComplete","addItems","items","text","newItem","idx","j","splice","createItems","removeItems","isUniqueId","refresh","id","getULElement","createPopup","div","className","document","body","appendChild","dropDown","relateTo","collision","X","Y","position","targetType","content","getTargetElement","refreshPosition","hide","getPopUpElement","textContent","cssClass","split","appendItems","showIcon","hasIcon","span","item","eventArgs","innerHTML","attrs","tempItem","enableHtmlSanitizer","sanitize","url","separator","getModuleName","createAnchor","add","iconCss","childNodes","insertBefore","trigger","field","button","iconPosition","enablePersistence","appendTo","appendArrowSpan","setActiveElem","isColorPicker","createPopupOnClick","prevElem","previousSibling","elem","activeElem","val","destroy","classList$$1","attrList","getAttribute","removeAttribute","popupUnWireEvents","destroyPopup","unWireEvents","popupEle","getElementById","clickHandler","keyBoardHandler","delegateMousedownHandler","mousedownHandler","bind","popupWireEvents","popupElement","rippleFn","selector","parentElement","e","altKey","keyEventHandler","preventDefault","getLI","tagName","trgt","Array","beforeOpenArgs","event","cancel","observedArgs","show","setAttribute","openArgs","focusEle","beforeCloseArgs","closeArgs","onPropertyChanged","newProp","oldProp","btnModel","setProperties","arrowSpan","dataBind","focusIn","__decorate$2","TAGNAME","SplitButton","ele","ejInstance","btn","wrapper","nodeName","nodeValue","parentNode","initWrapper","createPrimaryButton","renderControl","createSecondaryButton","secondaryBtnObj","setAria","primaryBtnObj","type","btnElem","dropDownBtnModel","beforeItemRender","args","open","close","beforeOpen","callBackPromise","Deferred","resolve","beforeClose","concat","primaryBtnClickHandler","keyAction","btnKeyBoardHandler","keyConfigs","altdownarrow","action","promise","Promise","reject","catch","then","createButtonGroup","createElement$$1","child","nextChild","childs","buttons","__decorate$3","HIDESPINNER","PROGRESS","PROGRESSACTIVE","CONTENTCLS","SpinSettings","AnimationSettings","ProgressButton","step","init","start","percent","isPaused","startProgress","progressTime","stop","cancelAnimationFrame","timerId","progressComplete","finishProgress","spinSettings","toLowerCase","css","setContent","enableProgress","createProgress","spinner","setSpinPosition","width","template","getSpinner","getProgress","cont","setContentIcon","contElem","trim","node","clsList","isVertical","startAnimate","Date","now","duration","startContAnimate","timestamp","prevTime","prevPercent","prevProgressTime","timeDiff","stepTime","timeDiffBuffer","currentDuration","eIsVertical","successCallback","perc","pPerc","prgTim","pPrgTim","timDif","pTim","requestAnimationFrame","toString","interval","window","setTimeout","hideSpin","animationSettings","effect","animate","name","timingFunction","easing","begin","setSpinnerSize","end","clearTimeout","Math","max","offsetWidth","height","offsetHeight","setIconSpan","iconSpan","isSpinning","removeChild"],"mappings":"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","sourcesContent":["import { Animation, ChildProperty, Collection, Complex, Component, Event, EventHandler, KeyboardEvents, NotifyPropertyChanges, Property, SanitizeHtmlHelper, addClass, attributes, classList, closest, createElement, deleteObject, detach, extend, getInstance, getUniqueID, getValue, isNullOrUndefined, remove, removeClass, rippleEffect, select, setValue } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Popup, createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * @param {Object} props - Specifies the properties\n * @param {string[]} model - Specifies the model\n * @returns {Object} Component Model\n */\nfunction getModel(props, model) {\n    const obj = extend({}, props);\n    for (const prop of Object.keys(obj)) {\n        if ((model).indexOf(prop) < 0) {\n            deleteObject(obj, prop);\n        }\n    }\n    return obj;\n}\n/** @hidden\n * @param {HTMLElement} ul - Specifies the UL element\n * @param {number} keyCode - Specifies the keycode\n * @returns {void}\n */\nfunction upDownKeyHandler(ul, keyCode) {\n    const defaultIdx = keyCode === 40 ? 0 : ul.childElementCount - 1;\n    let liIdx = defaultIdx;\n    let li;\n    const selectedLi = ul.querySelector('.e-selected');\n    if (selectedLi) {\n        selectedLi.classList.remove('e-selected');\n    }\n    for (let i = 0, len = ul.children.length; i < len; i++) {\n        if (ul.children[i].classList.contains('e-focused')) {\n            li = ul.children[i];\n            liIdx = i;\n            li.classList.remove('e-focused');\n            if (keyCode === 40) {\n                liIdx++;\n            }\n            else {\n                liIdx--;\n            }\n            if (liIdx === (keyCode === 40 ? ul.childElementCount : -1)) {\n                liIdx = defaultIdx;\n            }\n        }\n    }\n    li = ul.children[liIdx];\n    liIdx = isValidLI(ul, li, liIdx, keyCode);\n    if (liIdx !== -1) {\n        addClass([ul.children[liIdx]], 'e-focused');\n        ul.children[liIdx].focus();\n    }\n}\n/**\n * Get Valid LI element\n *\n * @param {HTMLElement} ul - Specifies the UL element\n * @param {Element} li - Specifies the LI element\n * @param {number} index - Specifies the index\n * @param {number} keyCode - Specifies the keycode\n * @param {number} count - Specifies the count\n * @returns {number} - Index\n */\nfunction isValidLI(ul, li, index, keyCode, count = 0) {\n    if (li.classList.contains('e-separator') || li.classList.contains('e-disabled')) {\n        if (index === (keyCode === 40 ? ul.childElementCount - 1 : 0)) {\n            index = keyCode === 40 ? 0 : ul.childElementCount - 1;\n        }\n        else {\n            if (keyCode === 40) {\n                index++;\n            }\n            else {\n                index--;\n            }\n        }\n    }\n    li = ul.children[index];\n    if (li.classList.contains('e-separator') || li.classList.contains('e-disabled')) {\n        count++;\n        if (count === ul.childElementCount) {\n            return index = -1;\n        }\n        index = isValidLI(ul, li, index, keyCode, count);\n    }\n    return index;\n}\n/** @hidden\n * @param {HTMLElement} popup - Specifies the popup element.\n * @returns {void}\n */\nfunction setBlankIconStyle(popup) {\n    const blankIconList = [].slice.call(popup.getElementsByClassName('e-blank-icon'));\n    if (!blankIconList.length) {\n        return;\n    }\n    let iconLi = popup.querySelector('.e-item:not(.e-blank-icon):not(.e-separator)');\n    if (iconLi.classList.contains('e-url')) {\n        iconLi = iconLi.querySelector('.e-menu-url');\n    }\n    const icon = iconLi.querySelector('.e-menu-icon');\n    let cssProp;\n    const enableRtl = popup.classList.contains('e-rtl');\n    if (enableRtl) {\n        cssProp = { padding: 'paddingRight', margin: 'marginLeft' };\n    }\n    else {\n        cssProp = { padding: 'paddingLeft', margin: 'marginRight' };\n    }\n    /* eslint-disable */\n    let size = `${parseInt(getComputedStyle(icon).fontSize, 10) + parseInt((enableRtl ? getComputedStyle(icon)[cssProp.margin] : getComputedStyle(icon)[cssProp.margin]), 10)\n        + parseInt(getComputedStyle(iconLi).paddingLeft, 10)}px`;\n    blankIconList.forEach((li) => {\n        if (li.classList.contains('e-url')) {\n            li.querySelector('.e-menu-url').style[cssProp.padding] = size;\n        }\n        else {\n            li.style[cssProp.padding] = size;\n        }\n    });\n    /* eslint-enable */\n}\n/**\n * Defines the items of Split Button/DropDownButton.\n */\nclass Item extends ChildProperty {\n}\n__decorate([\n    Property('')\n], Item.prototype, \"iconCss\", void 0);\n__decorate([\n    Property('')\n], Item.prototype, \"id\", void 0);\n__decorate([\n    Property(false)\n], Item.prototype, \"separator\", void 0);\n__decorate([\n    Property('')\n], Item.prototype, \"text\", void 0);\n__decorate([\n    Property('')\n], Item.prototype, \"url\", void 0);\n__decorate([\n    Property(false)\n], Item.prototype, \"disabled\", void 0);\n\n/**\n * Common modules\n */\n\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst classNames = {\n    DISABLED: 'e-disabled',\n    FOCUS: 'e-focused',\n    ICON: 'e-menu-icon',\n    ITEM: 'e-item',\n    POPUP: 'e-dropdown-popup',\n    RTL: 'e-rtl',\n    SEPARATOR: 'e-separator',\n    VERTICAL: 'e-vertical'\n};\n/**\n * DropDownButton component is used to toggle contextual overlays for displaying list of action items.\n * It can contain both text and images.\n * ```html\n * <button id=\"element\">DropDownButton</button>\n * ```\n * ```typescript\n * <script>\n * var dropDownButtonObj = new DropDownButton({items: [{ text: 'Action1' }, { text: 'Action2' },{ text: 'Action3' }]);\n * dropDownButtonObj.appendTo(\"#element\");\n * </script>\n * ```\n */\nlet DropDownButton = class DropDownButton extends Component {\n    /**\n     * Constructor for creating the widget\n     *\n     * @param  {DropDownButtonModel} options - Specifies dropdown button model\n     * @param  {string|HTMLButtonElement} element - Specifies element\n     * @hidden\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.isPopupCreated = true;\n    }\n    preRender() {\n        /** */\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    getPersistData() {\n        return this.addOnPersist([]);\n    }\n    /**\n     * To open/close DropDownButton popup based on current state of the DropDownButton.\n     *\n     * @returns {void}\n     */\n    toggle() {\n        if (this.canOpen()) {\n            this.openPopUp();\n        }\n        else {\n            this.closePopup();\n        }\n    }\n    /**\n     * Initialize the Component rendering\n     *\n     * @returns {void}\n     * @private\n     */\n    render() {\n        this.initialize();\n        if (!this.disabled) {\n            this.wireEvents();\n        }\n        this.renderComplete();\n    }\n    /**\n     * Adds a new item to the menu. By default, new item appends to the list as the last item,\n     * but you can insert based on the text parameter.\n     *\n     * @param  { ItemModel[] } items - Specifies an array of JSON data.\n     * @param { string } text - Specifies the text to insert the newly added item in the menu.\n     * @returns {void}.\n     */\n    addItems(items, text) {\n        let newItem;\n        let idx = this.items.length;\n        for (let j = 0, len = this.items.length; j < len; j++) {\n            if (text === this.items[j].text) {\n                idx = j;\n                break;\n            }\n        }\n        for (let i = items.length - 1; i >= 0; i--) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            newItem = new Item(this, 'items', items[i], true);\n            this.items.splice(idx, 0, newItem);\n        }\n        if (!this.canOpen()) {\n            this.createItems();\n        }\n    }\n    /**\n     * Removes the items from the menu.\n     *\n     * @param  { string[] } items - Specifies an array of string to remove the items.\n     * @param { string } isUniqueId - Set `true` if specified items is a collection of unique id.\n     * @returns {void}.\n     */\n    removeItems(items, isUniqueId) {\n        let refresh = false;\n        for (let i = 0, len = items.length; i < len; i++) {\n            for (let j = 0, len = this.items.length; j < len; j++) {\n                if (items[i] === (isUniqueId ? this.items[j].id : this.items[j].text)) {\n                    this.items.splice(j, 1);\n                    refresh = true;\n                    break;\n                }\n            }\n        }\n        if (refresh && this.getULElement()) {\n            this.createItems();\n        }\n    }\n    createPopup() {\n        const div = this.createElement('div', {\n            className: classNames.POPUP,\n            id: this.element.id + '-popup'\n        });\n        document.body.appendChild(div);\n        this.dropDown = new Popup(div, {\n            relateTo: this.element,\n            collision: { X: 'fit', Y: 'flip' },\n            position: { X: 'left', Y: 'bottom' },\n            targetType: 'relative',\n            content: this.target ? this.getTargetElement() : '',\n            enableRtl: this.enableRtl\n        });\n        if (this.dropDown.element.style.position === 'fixed') {\n            this.dropDown.refreshPosition(this.element);\n        }\n        this.dropDown.hide();\n        attributes(this.element, {\n            ['aria-haspopup']: this.items.length || this.target ? 'true' : 'false', ['aria-expanded']: 'false',\n            ['aria-owns']: this.getPopUpElement().id, ['type']: 'button',\n            ['aria-label']: this.element.textContent + ' dropdownbutton'\n        });\n        if (this.cssClass) {\n            addClass([div], this.cssClass.split(' '));\n        }\n        this.isPopupCreated = true;\n    }\n    getTargetElement() {\n        return typeof (this.target) === 'string' ? select(this.target) : this.target;\n    }\n    createItems(appendItems) {\n        const items = this.items;\n        const showIcon = this.hasIcon(this.items, 'iconCss');\n        let span;\n        let item;\n        let li;\n        let eventArgs;\n        let ul = this.getULElement();\n        if (ul) {\n            ul.innerHTML = '';\n        }\n        else {\n            ul = this.createElement('ul', {\n                attrs: { 'role': 'menu', 'tabindex': '0' }\n            });\n        }\n        for (let i = 0; i < items.length; i++) {\n            item = items[i];\n            const tempItem = (this.enableHtmlSanitizer) ? SanitizeHtmlHelper.sanitize(item.text) : item.text;\n            li = this.createElement('li', {\n                innerHTML: item.url ? '' : tempItem,\n                className: item.separator ? classNames.ITEM + ' ' + classNames.SEPARATOR : classNames.ITEM,\n                attrs: { 'role': 'menuItem', 'tabindex': '-1' },\n                id: item.id ? item.id : getUniqueID('e-' + this.getModuleName() + '-item')\n            });\n            if (item.url) {\n                li.appendChild(this.createAnchor(item));\n                li.classList.add('e-url');\n            }\n            if (item.iconCss) {\n                span = this.createElement('span', { className: classNames.ICON + ' ' + item.iconCss });\n                if (item.url) {\n                    li.childNodes[0].appendChild(span);\n                }\n                else {\n                    li.insertBefore(span, li.childNodes[0]);\n                }\n            }\n            else {\n                if (showIcon && !item.separator) {\n                    li.classList.add('e-blank-icon');\n                }\n            }\n            if (item.disabled) {\n                li.classList.add('e-disabled');\n            }\n            eventArgs = { item: item, element: li };\n            this.trigger('beforeItemRender', eventArgs);\n            ul.appendChild(li);\n        }\n        if (appendItems) {\n            this.getPopUpElement().appendChild(ul);\n        }\n        if (showIcon) {\n            setBlankIconStyle(this.getPopUpElement());\n        }\n    }\n    hasIcon(items, field) {\n        for (let i = 0, len = items.length; i < len; i++) {\n            if (items[i][field]) {\n                return true;\n            }\n        }\n        return false;\n    }\n    createAnchor(item) {\n        const tempItem = (this.enableHtmlSanitizer) ? SanitizeHtmlHelper.sanitize(item.text) : item.text;\n        return this.createElement('a', { className: 'e-menu-text e-menu-url', innerHTML: tempItem, attrs: { 'href': item.url } });\n    }\n    initialize() {\n        this.button = new Button({\n            iconCss: this.iconCss, iconPosition: this.iconPosition, cssClass: this.cssClass, content: this.content,\n            disabled: this.disabled, enableRtl: this.enableRtl, enablePersistence: this.enablePersistence\n        });\n        this.button.createElement = this.createElement;\n        this.button.appendTo(this.element);\n        if (!this.element.id) {\n            this.element.id = getUniqueID('e-' + this.getModuleName());\n        }\n        this.appendArrowSpan();\n        this.setActiveElem([this.element]);\n        if ((this.target && !this.isColorPicker()) || !this.createPopupOnClick) {\n            this.createPopup();\n        }\n        else {\n            this.isPopupCreated = false;\n        }\n    }\n    isColorPicker() {\n        if (!this.element) {\n            return false;\n        }\n        const prevElem = this.element.previousSibling;\n        if (prevElem && prevElem.classList && prevElem.classList.contains('e-split-colorpicker')) {\n            return true;\n        }\n        return false;\n    }\n    appendArrowSpan() {\n        this.element.appendChild(this.createElement('span', {\n            className: 'e-btn-icon e-icons ' + 'e-icon-' + (this.cssClass.indexOf(classNames.VERTICAL) > -1\n                ? 'bottom' : 'right') + ' e-caret'\n        }));\n    }\n    setActiveElem(elem) {\n        this.activeElem = elem;\n    }\n    /**\n     * Get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    getModuleName() {\n        return 'dropdown-btn';\n    }\n    canOpen() {\n        let val = false;\n        if (this.isPopupCreated) {\n            val = this.getPopUpElement().classList.contains('e-popup-close');\n        }\n        return val;\n    }\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n    destroy() {\n        super.destroy();\n        if (this.getModuleName() === 'dropdown-btn') {\n            let classList$$1;\n            if (this.element.querySelector('span.e-caret')) {\n                detach(this.element.querySelector('span.e-caret'));\n            }\n            if (this.cssClass) {\n                classList$$1 = this.cssClass.split(' ');\n            }\n            this.button.destroy();\n            if (classList$$1) {\n                removeClass([this.element], classList$$1);\n            }\n            removeClass(this.activeElem, ['e-active']);\n            const attrList = this.element.getAttribute('class') ? ['aria-haspopup', 'aria-expanded', 'aria-owns', 'type']\n                : ['aria-haspopup', 'aria-expanded', 'aria-owns', 'type', 'class'];\n            attrList.forEach((key) => {\n                this.element.removeAttribute(key);\n            });\n            this.popupUnWireEvents();\n            this.destroyPopup();\n            this.isPopupCreated = false;\n            if (!this.disabled) {\n                this.unWireEvents();\n            }\n        }\n    }\n    destroyPopup() {\n        if (this.isPopupCreated) {\n            this.dropDown.destroy();\n            if (this.getPopUpElement()) {\n                const popupEle = document.getElementById(this.getPopUpElement().id);\n                if (popupEle) {\n                    removeClass([popupEle], ['e-popup-open', 'e-popup-close']);\n                    detach(popupEle);\n                }\n            }\n            EventHandler.remove(this.getPopUpElement(), 'click', this.clickHandler);\n            EventHandler.remove(this.getPopUpElement(), 'keydown', this.keyBoardHandler);\n            if (this.isPopupCreated) {\n                this.dropDown = undefined;\n            }\n        }\n        this.isPopupCreated = false;\n    }\n    getPopUpElement() {\n        let val = null;\n        if (this.dropDown) {\n            val = this.dropDown.element;\n        }\n        return val;\n    }\n    getULElement() {\n        let val = null;\n        if (this.getPopUpElement()) {\n            val = this.getPopUpElement().children[0];\n        }\n        return val;\n    }\n    wireEvents() {\n        this.delegateMousedownHandler = this.mousedownHandler.bind(this);\n        if (!this.createPopupOnClick) {\n            EventHandler.add(document, 'mousedown touchstart', this.delegateMousedownHandler, this);\n        }\n        EventHandler.add(this.element, 'click', this.clickHandler, this);\n        EventHandler.add(this.element, 'keydown', this.keyBoardHandler, this);\n    }\n    popupWireEvents() {\n        const popupElement = this.getPopUpElement();\n        if (this.createPopupOnClick) {\n            EventHandler.add(document, 'mousedown touchstart', this.delegateMousedownHandler, this);\n        }\n        if (popupElement) {\n            EventHandler.add(popupElement, 'click', this.clickHandler, this);\n            EventHandler.add(popupElement, 'keydown', this.keyBoardHandler, this);\n        }\n        this.rippleFn = rippleEffect(popupElement, { selector: '.' + classNames.ITEM });\n    }\n    popupUnWireEvents() {\n        const popupElement = this.getPopUpElement();\n        if (this.createPopupOnClick) {\n            EventHandler.remove(document, 'mousedown touchstart', this.delegateMousedownHandler);\n        }\n        if (popupElement && popupElement.parentElement) {\n            EventHandler.remove(popupElement, 'click', this.clickHandler);\n            EventHandler.remove(popupElement, 'keydown', this.keyBoardHandler);\n        }\n    }\n    /**\n     * Handles the keyboard interactions.\n     *\n     * @param {KeyboardEventArgs} e - Specifies keyboard event args.\n     * @returns {void}\n     * @hidden\n     */\n    keyBoardHandler(e) {\n        if (e.target === this.element && (e.keyCode === 9 || (!e.altKey && e.keyCode === 40) || e.keyCode === 38)) {\n            return;\n        }\n        switch (e.keyCode) {\n            case 38:\n            case 40:\n                if (e.altKey && (e.keyCode === 38 || e.keyCode === 40)) {\n                    this.keyEventHandler(e);\n                }\n                else {\n                    this.upDownKeyHandler(e);\n                }\n                break;\n            case 9:\n            case 13:\n            case 27:\n            case 32:\n                this.keyEventHandler(e);\n                break;\n        }\n    }\n    upDownKeyHandler(e) {\n        if (this.target && (e.keyCode === 38 || e.keyCode === 40)) {\n            return;\n        }\n        e.preventDefault();\n        upDownKeyHandler(this.getULElement(), e.keyCode);\n    }\n    keyEventHandler(e) {\n        if (this.target && (e.keyCode === 13 || e.keyCode === 9)) {\n            return;\n        }\n        if (e.target && e.target.className.indexOf('e-edit-template') > -1 && e.keyCode === 32) {\n            return;\n        }\n        if (e.keyCode !== 9) {\n            e.preventDefault();\n        }\n        if (e.keyCode === 27 || e.keyCode === 38 || e.keyCode === 9) {\n            if (!this.canOpen()) {\n                this.closePopup(e, this.element);\n            }\n        }\n        else {\n            this.clickHandler(e);\n        }\n    }\n    getLI(elem) {\n        return elem.tagName === 'LI' ? elem : closest(elem, 'li');\n    }\n    mousedownHandler(e) {\n        const trgt = e.target;\n        if (this.dropDown && !this.canOpen() && !(closest(trgt, '[id=\"' + this.getPopUpElement().id + '\"]')\n            || closest(trgt, '[id=\"' + this.element.id + '\"]'))) {\n            this.closePopup(e);\n        }\n    }\n    clickHandler(e) {\n        const trgt = e.target;\n        if (closest(trgt, '[id=\"' + this.element.id + '\"]')) {\n            if (!this.createPopupOnClick || (this.target && !this.isColorPicker())) {\n                if (this.getPopUpElement().classList.contains('e-popup-close')) {\n                    this.openPopUp(e);\n                }\n                else {\n                    this.closePopup(e);\n                }\n            }\n            else if (this.isPopupCreated) {\n                this.closePopup(e, this.activeElem[0]);\n            }\n            else {\n                this.createPopup();\n                this.openPopUp(e);\n            }\n        }\n        else {\n            if (closest(trgt, '[id=\"' + this.getPopUpElement().id + '\"]')) {\n                let eventArgs;\n                let liIdx;\n                let item;\n                const li = this.getLI(trgt);\n                if (li) {\n                    liIdx = Array.prototype.indexOf.call(this.getULElement().children, li);\n                    item = this.items[liIdx];\n                    if (item) {\n                        eventArgs = { element: li, item: item };\n                        this.trigger('select', eventArgs);\n                    }\n                    this.closePopup(e, this.activeElem[0]);\n                }\n            }\n        }\n    }\n    openPopUp(e = null) {\n        if (!this.target) {\n            this.createItems(true);\n        }\n        const ul = this.getULElement();\n        this.popupWireEvents();\n        const beforeOpenArgs = { element: ul, items: this.items, event: e, cancel: false };\n        this.trigger('beforeOpen', beforeOpenArgs, (observedArgs) => {\n            if (!observedArgs.cancel) {\n                const ul = this.getULElement();\n                this.dropDown.show(null, this.element);\n                addClass([this.element], 'e-active');\n                this.element.setAttribute('aria-expanded', 'true');\n                ul.focus();\n                const openArgs = { element: ul, items: this.items };\n                this.trigger('open', openArgs);\n            }\n        });\n    }\n    closePopup(e = null, focusEle) {\n        const ul = this.getULElement();\n        const beforeCloseArgs = { element: ul, items: this.items, event: e, cancel: false };\n        let popupElement = this.getPopUpElement();\n        if (popupElement) {\n            EventHandler.remove(popupElement, 'keydown', this.keyBoardHandler);\n        }\n        this.trigger('beforeClose', beforeCloseArgs, (observedArgs) => {\n            if (!observedArgs.cancel) {\n                this.popupUnWireEvents();\n                const ul = this.getULElement();\n                const selectedLi = ul.querySelector('.e-selected');\n                if (selectedLi) {\n                    selectedLi.classList.remove('e-selected');\n                }\n                this.dropDown.hide();\n                removeClass(this.activeElem, 'e-active');\n                this.element.setAttribute('aria-expanded', 'false');\n                if (focusEle) {\n                    focusEle.focus();\n                }\n                const closeArgs = { element: ul, items: this.items };\n                this.trigger('close', closeArgs);\n                if (!this.target && ul) {\n                    detach(ul);\n                }\n                if (!this.target || this.isColorPicker()) {\n                    if (this.createPopupOnClick) {\n                        this.destroyPopup();\n                    }\n                }\n                if (this.target) {\n                    this.isPopupCreated = this.createPopupOnClick ? false : true;\n                }\n            }\n        });\n    }\n    unWireEvents() {\n        if (!this.createPopupOnClick) {\n            EventHandler.remove(document, 'mousedown touchstart', this.delegateMousedownHandler);\n        }\n        EventHandler.remove(this.element, 'click', this.clickHandler);\n        EventHandler.remove(this.element, 'keydown', this.keyBoardHandler);\n        if (this.isPopupCreated) {\n            EventHandler.remove(this.getPopUpElement(), 'click', this.clickHandler);\n            EventHandler.remove(this.getPopUpElement(), 'keydown', this.keyBoardHandler);\n        }\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param  {DropDownButtonModel} newProp - Specifies new properties\n     * @param  {DropDownButtonModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        const btnModel = ['content', 'cssClass', 'iconCss', 'iconPosition', 'disabled', 'enableRtl'];\n        this.button.setProperties(getModel(newProp, btnModel));\n        let popupElement;\n        if (this.isPopupCreated) {\n            popupElement = this.getPopUpElement();\n            this.dropDown.setProperties(getModel(newProp, ['enableRtl']));\n        }\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'content':\n                    if (!this.element.querySelector('span.e-caret')) {\n                        this.appendArrowSpan();\n                    }\n                    break;\n                case 'disabled':\n                    if (newProp.disabled) {\n                        this.unWireEvents();\n                        if (this.isPopupCreated && !this.canOpen()) {\n                            this.closePopup();\n                        }\n                    }\n                    else {\n                        this.wireEvents();\n                    }\n                    break;\n                case 'cssClass':\n                    if (newProp.cssClass.indexOf(classNames.VERTICAL) > -1) {\n                        const arrowSpan = this.element.querySelector('span.e-caret');\n                        classList(arrowSpan, ['e-icon-bottom'], ['e-icon-right']);\n                    }\n                    if (this.isPopupCreated) {\n                        if (oldProp.cssClass) {\n                            removeClass([popupElement], oldProp.cssClass.split(' '));\n                        }\n                        if (newProp.cssClass) {\n                            addClass([popupElement], newProp.cssClass.split(' '));\n                        }\n                    }\n                    break;\n                case 'target':\n                    this.dropDown.content = this.getTargetElement();\n                    this.dropDown.dataBind();\n                    break;\n                case 'items':\n                    if (this.isPopupCreated && this.getULElement()) {\n                        this.createItems();\n                    }\n                    break;\n                case 'createPopupOnClick':\n                    if (newProp.createPopupOnClick) {\n                        this.destroyPopup();\n                    }\n                    else {\n                        this.createPopup();\n                    }\n                    break;\n            }\n        }\n    }\n    /**\n     * Sets the focus to DropDownButton\n     * its native method\n     *\n     * @public\n     * @returns {void}\n     */\n    focusIn() {\n        this.element.focus();\n    }\n};\n__decorate$1([\n    Property('')\n], DropDownButton.prototype, \"content\", void 0);\n__decorate$1([\n    Property('')\n], DropDownButton.prototype, \"cssClass\", void 0);\n__decorate$1([\n    Property(false)\n], DropDownButton.prototype, \"disabled\", void 0);\n__decorate$1([\n    Property('')\n], DropDownButton.prototype, \"iconCss\", void 0);\n__decorate$1([\n    Property('Left')\n], DropDownButton.prototype, \"iconPosition\", void 0);\n__decorate$1([\n    Property(false)\n], DropDownButton.prototype, \"enableHtmlSanitizer\", void 0);\n__decorate$1([\n    Collection([], Item)\n], DropDownButton.prototype, \"items\", void 0);\n__decorate$1([\n    Property(false)\n], DropDownButton.prototype, \"createPopupOnClick\", void 0);\n__decorate$1([\n    Property('')\n], DropDownButton.prototype, \"target\", void 0);\n__decorate$1([\n    Event()\n], DropDownButton.prototype, \"beforeItemRender\", void 0);\n__decorate$1([\n    Event()\n], DropDownButton.prototype, \"beforeOpen\", void 0);\n__decorate$1([\n    Event()\n], DropDownButton.prototype, \"beforeClose\", void 0);\n__decorate$1([\n    Event()\n], DropDownButton.prototype, \"close\", void 0);\n__decorate$1([\n    Event()\n], DropDownButton.prototype, \"open\", void 0);\n__decorate$1([\n    Event()\n], DropDownButton.prototype, \"select\", void 0);\n__decorate$1([\n    Event()\n], DropDownButton.prototype, \"created\", void 0);\nDropDownButton = __decorate$1([\n    NotifyPropertyChanges\n], DropDownButton);\n\n/**\n * DropDownButton modules\n */\n\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-button/drop-down-button-model.d.ts'/>\nconst RTL = 'e-rtl';\nconst TAGNAME = 'EJS-SPLITBUTTON';\n/**\n * SplitButton component has primary and secondary button. Primary button is used to select\n * default action and secondary button is used to toggle contextual overlays for displaying list of\n * action items. It can contain both text and images.\n * ```html\n * <button id=\"element\"></button>\n * ```\n * ```typescript\n * <script>\n * var splitBtnObj = new SplitButton({content: 'SplitButton'});\n * splitBtnObj.appendTo(\"#element\");\n * </script>\n * ```\n */\nlet SplitButton = class SplitButton extends DropDownButton {\n    /**\n     * Constructor for creating the widget\n     *\n     * @param  {SplitButtonModel} options - Specifies the splitbutton model\n     * @param  {string|HTMLButtonElement} element - Specifies the element\n     * @hidden\n     */\n    constructor(options, element) {\n        super(options, element);\n    }\n    /**\n     * Initialize Angular support.\n     *\n     * @private\n     * @returns {void}\n     */\n    preRender() {\n        let ele = this.element;\n        if (ele.tagName === TAGNAME) {\n            const ejInstance = getValue('ej2_instances', ele);\n            const btn = this.createElement('button', { attrs: { 'type': 'button' } });\n            const wrapper = this.createElement(TAGNAME, { className: 'e-' + this.getModuleName() + '-wrapper' });\n            for (let idx = 0, len = ele.attributes.length; idx < len; idx++) {\n                btn.setAttribute(ele.attributes[idx].nodeName, ele.attributes[idx].nodeValue);\n            }\n            ele.parentNode.insertBefore(wrapper, ele);\n            detach(ele);\n            ele = btn;\n            wrapper.appendChild(ele);\n            setValue('ej2_instances', ejInstance, ele);\n            this.wrapper = wrapper;\n            this.element = ele;\n        }\n        if (!this.element.id) {\n            this.element.id = getUniqueID('e-' + this.getModuleName());\n        }\n    }\n    /**\n     * Initialize the Component rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    render() {\n        this.initWrapper();\n        this.createPrimaryButton();\n        this.renderControl();\n    }\n    renderControl() {\n        this.createSecondaryButton();\n        this.setActiveElem([this.element, this.secondaryBtnObj.element]);\n        this.setAria();\n        this.wireEvents();\n        this.renderComplete();\n    }\n    /**\n     * Adds a new item to the menu. By default, new item appends to the list as the last item,\n     * but you can insert based on the text parameter.\n     *\n     * @param  { ItemModel[] } items - Specifies an array of JSON data.\n     * @param { string } text - Specifies the text to insert the newly added item in the menu.\n     * @returns {void}.\n     */\n    addItems(items, text) {\n        super.addItems(items, text);\n        this.secondaryBtnObj.items = this.items;\n    }\n    /**\n     * Removes the items from the menu.\n     *\n     * @param  { string[] } items - Specifies an array of string to remove the items.\n     * @param { string } isUniqueId - Set `true` if specified items is a collection of unique id.\n     * @returns {void}.\n     */\n    removeItems(items, isUniqueId) {\n        super.removeItems(items, isUniqueId);\n        this.secondaryBtnObj.items = this.items;\n    }\n    initWrapper() {\n        if (!this.wrapper) {\n            this.wrapper = this.createElement('div', { className: 'e-' + this.getModuleName() + '-wrapper' });\n            this.element.parentNode.insertBefore(this.wrapper, this.element);\n        }\n        this.element.classList.remove('e-' + this.getModuleName());\n        if (this.enableRtl) {\n            this.wrapper.classList.add(RTL);\n        }\n        if (this.cssClass) {\n            addClass([this.wrapper], this.cssClass.split(' '));\n        }\n    }\n    createPrimaryButton() {\n        const btnModel = {\n            cssClass: this.cssClass,\n            enableRtl: this.enableRtl,\n            iconCss: this.iconCss,\n            iconPosition: this.iconPosition,\n            content: this.content,\n            disabled: this.disabled\n        };\n        this.primaryBtnObj = new Button(btnModel);\n        this.primaryBtnObj.createElement = this.createElement;\n        this.primaryBtnObj.appendTo(this.element);\n        this.element.classList.add('e-' + this.getModuleName());\n        this.element.type = 'button';\n        this.wrapper.appendChild(this.element);\n    }\n    createSecondaryButton() {\n        const btnElem = this.createElement('button', {\n            className: 'e-icon-btn',\n            attrs: { 'tabindex': '-1' },\n            id: this.element.id + '_dropdownbtn'\n        });\n        this.wrapper.appendChild(btnElem);\n        const dropDownBtnModel = {\n            cssClass: this.cssClass,\n            disabled: this.disabled,\n            enableRtl: this.enableRtl,\n            items: this.items,\n            target: this.target,\n            createPopupOnClick: this.createPopupOnClick\n        };\n        dropDownBtnModel.beforeItemRender = (args) => {\n            if (this.createPopupOnClick) {\n                this.secondaryBtnObj.dropDown.relateTo = this.wrapper;\n                this.dropDown = this.secondaryBtnObj.dropDown;\n            }\n            this.trigger('beforeItemRender', args);\n        };\n        dropDownBtnModel.open = (args) => {\n            this.trigger('open', args);\n        };\n        dropDownBtnModel.close = (args) => {\n            this.trigger('close', args);\n        };\n        dropDownBtnModel.select = (args) => {\n            this.trigger('select', args);\n        };\n        dropDownBtnModel.beforeOpen = (args) => {\n            const callBackPromise = new Deferred();\n            this.trigger('beforeOpen', args, (observedArgs) => {\n                callBackPromise.resolve(observedArgs);\n            });\n            return callBackPromise;\n        };\n        dropDownBtnModel.beforeClose = (args) => {\n            const callBackPromise = new Deferred();\n            this.trigger('beforeClose', args, (observedArgs) => {\n                callBackPromise.resolve(observedArgs);\n            });\n            return callBackPromise;\n        };\n        this.secondaryBtnObj = new DropDownButton(dropDownBtnModel);\n        this.secondaryBtnObj.createElement = this.createElement;\n        this.secondaryBtnObj.appendTo(btnElem);\n        if (!this.createPopupOnClick) {\n            this.secondaryBtnObj.dropDown.relateTo = this.wrapper;\n            this.dropDown = this.secondaryBtnObj.dropDown;\n        }\n        this.secondaryBtnObj.activeElem = [this.element, this.secondaryBtnObj.element];\n        this.secondaryBtnObj.element.querySelector('.e-btn-icon').classList.remove('e-icon-right');\n    }\n    setAria() {\n        attributes(this.element, {\n            'aria-expanded': 'false', 'aria-haspopup': 'true',\n            'aria-label': this.element.textContent + ' splitbutton', 'aria-owns': this.element.id + '_dropdownbtn-popup'\n        });\n    }\n    /**\n     * Get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    getModuleName() {\n        return 'split-btn';\n    }\n    /**\n     * To open/close SplitButton popup based on current state of the SplitButton.\n     *\n     * @returns {void}\n     */\n    toggle() {\n        this.secondaryBtnObj.toggle();\n    }\n    destroy() {\n        let classList$$1 = [RTL];\n        if (this.cssClass) {\n            classList$$1 = classList$$1.concat(this.cssClass.split(' '));\n        }\n        if (this.element) {\n            const element = document.getElementById(this.element.id);\n            if (element && element.parentElement === this.wrapper) {\n                if (this.wrapper.tagName === TAGNAME) {\n                    this.wrapper.innerHTML = '';\n                    removeClass([this.wrapper], ['e-rtl', 'e-' + this.getModuleName() + '-wrapper']);\n                    removeClass([this.wrapper], this.cssClass.split(' '));\n                }\n                else {\n                    removeClass([this.element], classList$$1);\n                    ['aria-label', 'aria-haspopup', 'aria-expanded', 'aria-owns', 'type'].forEach((key) => {\n                        this.element.removeAttribute(key);\n                    });\n                    this.wrapper.parentNode.insertBefore(this.element, this.wrapper);\n                    remove(this.wrapper);\n                }\n                this.unWireEvents();\n            }\n        }\n        this.primaryBtnObj.destroy();\n        this.secondaryBtnObj.destroy();\n        super.destroy();\n        if (!this.element.getAttribute('class')) {\n            this.element.removeAttribute('class');\n        }\n    }\n    wireEvents() {\n        EventHandler.add(this.element, 'click', this.primaryBtnClickHandler, this);\n        new KeyboardEvents(this.element, {\n            keyAction: this.btnKeyBoardHandler.bind(this),\n            keyConfigs: {\n                altdownarrow: 'alt+downarrow'\n            }\n        });\n    }\n    unWireEvents() {\n        EventHandler.remove(this.element, 'click', this.primaryBtnClickHandler);\n        getInstance(this.element, KeyboardEvents).destroy();\n    }\n    primaryBtnClickHandler() {\n        this.trigger('click', { element: this.element });\n    }\n    btnKeyBoardHandler(e) {\n        switch (e.action) {\n            case 'altdownarrow':\n                this.clickHandler(e);\n                break;\n        }\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param  {SplitButtonModel} newProp - Specifies new properties\n     * @param  {SplitButtonModel} oldProp - Specifies old properties\n     * @returns {void}\n     */\n    onPropertyChanged(newProp, oldProp) {\n        let model = ['content', 'iconCss', 'iconPosition', 'cssClass', 'disabled', 'enableRtl'];\n        this.primaryBtnObj.setProperties(getModel(newProp, model));\n        model = ['beforeOpen', 'beforeItemRender', 'select', 'open',\n            'close', 'cssClass', 'disabled', 'enableRtl', 'createPopupOnClick'];\n        if (Object.keys(newProp).indexOf('items') > -1) {\n            this.secondaryBtnObj.items = newProp.items;\n            this.secondaryBtnObj.dataBind();\n        }\n        this.secondaryBtnObj.setProperties(getModel(newProp, model));\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.wrapper], oldProp.cssClass.split(' '));\n                    }\n                    addClass([this.wrapper], newProp.cssClass.split(' '));\n                    break;\n                case 'enableRtl':\n                    if (newProp.enableRtl) {\n                        addClass([this.wrapper], RTL);\n                    }\n                    else {\n                        removeClass([this.wrapper], RTL);\n                    }\n                    break;\n            }\n        }\n    }\n    /**\n     * Sets the focus to SplitButton\n     * its native method\n     *\n     * @public\n     * @returns {void}\n     */\n    focusIn() {\n        this.element.focus();\n    }\n};\n__decorate$2([\n    Property('')\n], SplitButton.prototype, \"content\", void 0);\n__decorate$2([\n    Property('')\n], SplitButton.prototype, \"cssClass\", void 0);\n__decorate$2([\n    Property(false)\n], SplitButton.prototype, \"disabled\", void 0);\n__decorate$2([\n    Property('')\n], SplitButton.prototype, \"iconCss\", void 0);\n__decorate$2([\n    Property('Left')\n], SplitButton.prototype, \"iconPosition\", void 0);\n__decorate$2([\n    Property(false)\n], SplitButton.prototype, \"createPopupOnClick\", void 0);\n__decorate$2([\n    Collection([], Item)\n], SplitButton.prototype, \"items\", void 0);\n__decorate$2([\n    Property('')\n], SplitButton.prototype, \"target\", void 0);\n__decorate$2([\n    Event()\n], SplitButton.prototype, \"beforeItemRender\", void 0);\n__decorate$2([\n    Event()\n], SplitButton.prototype, \"beforeOpen\", void 0);\n__decorate$2([\n    Event()\n], SplitButton.prototype, \"beforeClose\", void 0);\n__decorate$2([\n    Event()\n], SplitButton.prototype, \"click\", void 0);\n__decorate$2([\n    Event()\n], SplitButton.prototype, \"close\", void 0);\n__decorate$2([\n    Event()\n], SplitButton.prototype, \"open\", void 0);\n__decorate$2([\n    Event()\n], SplitButton.prototype, \"select\", void 0);\n__decorate$2([\n    Event()\n], SplitButton.prototype, \"created\", void 0);\nSplitButton = __decorate$2([\n    NotifyPropertyChanges\n], SplitButton);\n/**\n * Deferred is used to handle asynchronous operation.\n */\nclass Deferred {\n    constructor() {\n        /**\n         * Promise is an object that represents a value that may not be available yet, but will be resolved at some point in the future.\n         */\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n        /**\n         * Defines the callback function triggers when the Deferred object is rejected.\n         */\n        this.catch = this.promise.catch.bind(this.promise);\n        /**\n         * Defines the callback function triggers when the Deferred object is resolved.\n         */\n        this.then = this.promise.then.bind(this.promise);\n    }\n}\n\n/**\n * Split Button modules\n */\n\n/**\n * Initialize ButtonGroup CSS component with specified properties.\n * ```html\n * <div id='buttongroup'>\n * <button></button>\n * <button></button>\n * <button></button>\n * </div>\n * ```\n * ```typescript\n * createButtonGroup('#buttongroup', {\n *   cssClass: 'e-outline',\n *   buttons: [\n *       { content: 'Day' },\n *       { content: 'Week' },\n *       { content: 'Work Week'}\n *   ]\n * });\n * ```\n *\n * @param {string} selector\n * @param {CreateButtonGroupModel} options\n * @returns HTMLElement\n */\n/**\n * Creates button group.\n *\n * @param {string} selector - Specifies the selector.\n * @param {CreateButtonGroupModel} options - Specifies the button group model.\n * @param {Function} createElement - Specifies the element.\n * @returns {HTMLElement} - Button group element.\n */\nfunction createButtonGroup(selector, options = {}, createElement$$1) {\n    let child;\n    let btnElem;\n    let nextChild;\n    let btnModel;\n    if (isNullOrUndefined(createElement$$1)) {\n        createElement$$1 = createElement;\n    }\n    const wrapper = document.querySelector(selector);\n    addClass([wrapper], ['e-btn-group', 'e-css']);\n    wrapper.setAttribute('role', 'group');\n    const childs = wrapper.children;\n    options.buttons = options.buttons || [];\n    for (let i = 0, j = 0; j < childs.length; i++, j++) {\n        child = childs[j];\n        btnModel = options.buttons[i];\n        if (btnModel !== null) {\n            if (child.tagName === 'BUTTON') {\n                btnElem = child;\n            }\n            else {\n                btnElem = createElement$$1('label');\n                nextChild = childs[j + 1];\n                if (nextChild) {\n                    wrapper.insertBefore(btnElem, nextChild);\n                }\n                else {\n                    wrapper.appendChild(btnElem);\n                }\n                if (child.id) {\n                    btnElem.setAttribute('for', child.id);\n                }\n                if (btnModel && btnModel.disabled) {\n                    child.disabled = true;\n                }\n                j++;\n            }\n            if (options.cssClass && btnModel && !btnModel.cssClass) {\n                btnModel.cssClass = options.cssClass;\n            }\n            new Button(btnModel || {}, btnElem);\n        }\n    }\n    return wrapper;\n}\n\n/**\n * ButtonGroup modules\n */\n\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst HIDESPINNER = 'e-hide-spinner';\nconst PROGRESS = 'e-progress';\nconst PROGRESSACTIVE = 'e-progress-active';\nconst CONTENTCLS = 'e-btn-content';\n/**\n * Defines the spin settings.\n */\nclass SpinSettings extends ChildProperty {\n}\n__decorate$3([\n    Property(null)\n], SpinSettings.prototype, \"template\", void 0);\n__decorate$3([\n    Property(16)\n], SpinSettings.prototype, \"width\", void 0);\n__decorate$3([\n    Property('Left')\n], SpinSettings.prototype, \"position\", void 0);\n/**\n * Defines the animation settings.\n */\nclass AnimationSettings extends ChildProperty {\n}\n__decorate$3([\n    Property(400)\n], AnimationSettings.prototype, \"duration\", void 0);\n__decorate$3([\n    Property('None')\n], AnimationSettings.prototype, \"effect\", void 0);\n__decorate$3([\n    Property('ease')\n], AnimationSettings.prototype, \"easing\", void 0);\n/**\n * The ProgressButton visualizes the progression of an operation to indicate the user\n * that a process is happening in the background with visual representation.\n * ```html\n * <button id=\"element\"></button>\n * ```\n * ```typescript\n * <script>\n * var progressButtonObj = new ProgressButton({ content: 'Progress Button' });\n * progressButtonObj.appendTo(\"#element\");\n * </script>\n * ```\n */\nlet ProgressButton = class ProgressButton extends Button {\n    /**\n     * Constructor for creating the widget.\n     *\n     * @param  {ProgressButtonModel} options - Specifies progress button model\n     * @param  {string|HTMLButtonElement} element - Specifies element\n     */\n    constructor(options, element) {\n        super(options, element);\n        this.step = 1;\n    }\n    preRender() {\n        super.preRender();\n    }\n    /**\n     * Initialize the Component rendering\n     *\n     * @returns {void}\n     * @private\n     */\n    render() {\n        super.render();\n        this.init();\n        this.wireEvents();\n        this.setAria();\n        this.renderComplete();\n    }\n    /**\n     * Starts the button progress at the specified percent.\n     *\n     * @param {number} percent - Starts the button progress at this percent.\n     * @returns {void}\n     */\n    start(percent) {\n        this.isPaused = false;\n        this.startProgress(percent ? percent : this.percent, this.progressTime);\n    }\n    /**\n     * Stops the button progress.\n     *\n     * @returns {void}\n     */\n    stop() {\n        this.isPaused = true;\n        cancelAnimationFrame(this.timerId);\n    }\n    /**\n     * Complete the button progress.\n     *\n     * @returns {void}\n     */\n    progressComplete() {\n        this.isPaused = false;\n        this.finishProgress();\n    }\n    /**\n     * Get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    getModuleName() {\n        return 'progress-btn';\n    }\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n    destroy() {\n        let classList$$1 = [HIDESPINNER, PROGRESSACTIVE, 'e-round-corner', 'e-' + super.getModuleName(),\n            'e-spin-' + this.spinSettings.position.toLowerCase()];\n        super.destroy();\n        this.unWireEvents();\n        this.element.innerHTML = '';\n        if (this.cssClass) {\n            classList$$1 = classList$$1.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], classList$$1);\n        const css = this.element.getAttribute('class') ? ['aria-label', 'aria-valuemin', 'aria-valuemax', 'aria-valuenow']\n            : ['aria-label', 'aria-valuemin', 'aria-valuemax', 'aria-valuenow', 'class'];\n        css.forEach((key) => {\n            this.element.removeAttribute(key);\n        });\n        if (this.disabled) {\n            this.element.removeAttribute('disabled');\n        }\n    }\n    init() {\n        this.element.classList.add('e-' + super.getModuleName());\n        this.setContent();\n        this.createSpinner();\n        if (this.enableProgress) {\n            this.createProgress();\n        }\n    }\n    createSpinner() {\n        const spinner = this.createElement('span', { className: 'e-spinner' });\n        this.setSpinPosition(spinner);\n        createSpinner({\n            target: spinner, width: this.spinSettings.width || 16, template: this.spinSettings.template\n        }, this.createElement);\n    }\n    getSpinner() {\n        return this.element.getElementsByClassName('e-spinner')[0];\n    }\n    getProgress() {\n        return this.element.getElementsByClassName(PROGRESS)[0];\n    }\n    setSpinPosition(ele) {\n        const position = this.spinSettings.position || 'Left';\n        if (position === 'Left' || position === 'Top') {\n            this.element.insertBefore(ele, this.element.getElementsByClassName(CONTENTCLS)[0]);\n        }\n        else {\n            this.element.appendChild(ele);\n        }\n        this.element.classList.add('e-spin-' + position.toLowerCase());\n    }\n    createProgress() {\n        this.element.appendChild(this.createElement('span', { className: PROGRESS }));\n    }\n    setContent() {\n        let cont;\n        cont = this.element.innerHTML;\n        if (this.enableHtmlSanitizer) {\n            cont = SanitizeHtmlHelper.sanitize(this.element.innerHTML);\n        }\n        this.element.innerHTML = '';\n        this.element.appendChild(this.createElement('span', { className: CONTENTCLS, innerHTML: cont }));\n    }\n    setContentIcon(content) {\n        const contElem = this.createElement('span', { className: CONTENTCLS, innerHTML: content });\n        if (this.iconCss) {\n            const span = this.createElement('span', { className: 'e-btn-icon ' + this.iconCss });\n            if (!this.element.textContent.trim()) {\n                this.element.classList.add('e-icon-btn');\n            }\n            else {\n                span.classList.add('e-icon-' + this.iconPosition.toLowerCase());\n                if (this.iconPosition === 'Top' || this.iconPosition === 'Bottom') {\n                    this.element.classList.add('e-' + this.iconPosition.toLowerCase() + '-icon-btn');\n                }\n            }\n            const node = contElem.childNodes[0];\n            if (node && (this.iconPosition === 'Left' || this.iconPosition === 'Top')) {\n                contElem.insertBefore(span, node);\n            }\n            else {\n                contElem.appendChild(span);\n            }\n        }\n        this.element.appendChild(contElem);\n    }\n    clickHandler() {\n        if (this.element.classList.contains(PROGRESSACTIVE)) {\n            return;\n        }\n        this.startProgress();\n    }\n    startProgress(percent, progressTime) {\n        const clsList = this.element.classList;\n        const isVertical = clsList.contains('e-vertical');\n        clsList.add(PROGRESSACTIVE);\n        if (!(clsList.contains(HIDESPINNER))) {\n            showSpinner(this.element);\n        }\n        this.startAnimate(Date.now(), progressTime ? progressTime : 0, progressTime ? Date.now() - (this.duration * 1 / 100) : Date.now(), percent ? percent : 0, 0, this.step, 0, isVertical);\n        this.startContAnimate();\n    }\n    startAnimate(timestamp, progressTime, prevTime, percent, prevPercent, step, prevProgressTime, isVertical) {\n        try {\n            const timeDiff = timestamp - prevTime;\n            const stepTime = this.duration * step / 100;\n            const timeDiffBuffer = timeDiff ? (timeDiff < stepTime ? timeDiff - stepTime : timeDiff % stepTime) : 0;\n            this.progressTime = progressTime = progressTime + timeDiff - timeDiffBuffer;\n            prevTime = timestamp - timeDiffBuffer;\n            percent = percent + (timeDiff - timeDiffBuffer) / this.duration * 100;\n            prevPercent = ((progressTime - prevProgressTime) % stepTime === 0 || percent === 100) ? percent : prevPercent;\n            const args = { percent: prevPercent, currentDuration: progressTime, step: step };\n            this.eIsVertical = isVertical;\n            if (percent === 0) {\n                this.trigger('begin', args, (observedArgs) => {\n                    this.successCallback(observedArgs, percent, prevPercent, progressTime, prevProgressTime, timeDiffBuffer, prevTime);\n                });\n            }\n            else if (percent === 100 || progressTime === this.duration) {\n                this.trigger('end', args, (observedArgs) => {\n                    this.successCallback(observedArgs, percent, prevPercent, progressTime, prevProgressTime, timeDiffBuffer, prevTime);\n                });\n            }\n            else {\n                this.trigger('progress', args, (observedArgs) => {\n                    this.successCallback(observedArgs, percent, prevPercent, progressTime, prevProgressTime, timeDiffBuffer, prevTime);\n                });\n            }\n        }\n        catch (e) {\n            cancelAnimationFrame(this.timerId);\n            this.trigger('fail', e);\n        }\n    }\n    successCallback(args, perc, pPerc, prgTim, pPrgTim, timDif, pTim) {\n        let percent = perc;\n        let prevPercent = pPerc;\n        const timeDiffBuffer = timDif;\n        const progressTime = prgTim;\n        let prevProgressTime = pPrgTim;\n        const prevTime = pTim;\n        const isVertical = this.eIsVertical;\n        if (percent !== args.percent && args.percent !== prevPercent) {\n            percent = args.percent;\n        }\n        this.percent = percent;\n        this.step = args.step;\n        if ((progressTime - prevProgressTime) % (this.duration * args.step / 100) === 0 || percent === 100) {\n            this.timerId = requestAnimationFrame(() => {\n                if (this.enableProgress) {\n                    this.getProgress().style[isVertical ? 'height' : 'width'] = percent + '%';\n                }\n                this.element.setAttribute('aria-valuenow', percent.toString());\n            });\n            prevPercent = percent;\n            prevProgressTime = progressTime;\n        }\n        if (!this.isPaused) {\n            if (progressTime < this.duration && percent < 100) {\n                this.interval = window.setTimeout(() => {\n                    this.startAnimate(Date.now(), progressTime, prevTime, percent, prevPercent, args.step, prevProgressTime, isVertical);\n                }, (this.duration / 100) - timeDiffBuffer);\n            }\n            else {\n                this.interval = window.setTimeout(() => {\n                    this.progressTime = this.percent = 0;\n                    if (this.enableProgress) {\n                        this.getProgress().style[isVertical ? 'height' : 'width'] = '0%';\n                    }\n                    this.element.setAttribute('aria-valuenow', '0');\n                    this.hideSpin();\n                }, 100);\n            }\n        }\n    }\n    startContAnimate() {\n        const ele = this.element.getElementsByClassName(CONTENTCLS)[0];\n        if (this.animationSettings.effect !== 'None') {\n            (new Animation({})).animate(ele, {\n                duration: this.animationSettings.duration,\n                name: 'Progress' + this.animationSettings.effect,\n                timingFunction: this.animationSettings.easing,\n                begin: () => {\n                    if (this.spinSettings.position === 'Center') {\n                        this.setSpinnerSize();\n                    }\n                },\n                end: () => {\n                    ele.classList.add('e-animate-end');\n                }\n            });\n        }\n        else if (this.spinSettings.position === 'Center') {\n            this.setSpinnerSize();\n        }\n    }\n    finishProgress() {\n        const clsList = this.element.classList;\n        const isVertical = clsList.contains('e-vertical');\n        clsList.add(PROGRESSACTIVE);\n        const count = 100;\n        for (let i = this.percent; i < count; i++) {\n            i += 10;\n            if (i > 100) {\n                i = 100;\n            }\n            if (this.enableProgress) {\n                this.getProgress().style[isVertical ? 'height' : 'width'] = (this.percent < 100) ? (i + '%') : '100%';\n            }\n        }\n        this.element.setAttribute('aria-valuenow', '0');\n        this.hideSpin();\n        const args = { step: this.step, currentDuration: this.progressTime, percent: 100 };\n        clearTimeout(this.interval);\n        this.trigger('end', args);\n        this.progressTime = this.percent = 0;\n    }\n    setSpinnerSize() {\n        const ele = this.element.getElementsByClassName(CONTENTCLS)[0];\n        const spinner = this.getSpinner();\n        spinner.style.width = Math.max(spinner.offsetWidth, ele.offsetWidth) + 'px';\n        spinner.style.height = Math.max(spinner.offsetHeight, ele.offsetHeight) + 'px';\n        ele.classList.add('e-cont-animate');\n    }\n    hideSpin() {\n        const cont = this.element.getElementsByClassName(CONTENTCLS)[0];\n        if (!(this.element.classList.contains(HIDESPINNER))) {\n            hideSpinner(this.element);\n        }\n        this.element.classList.remove(PROGRESSACTIVE);\n        if (this.animationSettings.effect !== 'None') {\n            cont.classList.remove('e-animate-end');\n        }\n        if (this.spinSettings.position === 'Center') {\n            const ele = this.getSpinner();\n            cont.classList.remove('e-cont-animate');\n            ele.style.width = 'auto';\n            ele.style.height = 'auto';\n        }\n    }\n    setIconSpan() {\n        const cont = this.element.getElementsByClassName(CONTENTCLS)[0];\n        const iconSpan = this.element.getElementsByClassName('e-btn-icon')[0];\n        if (cont.childNodes[0] && (this.iconPosition === 'Left' || this.iconPosition === 'Top')) {\n            cont.insertBefore(iconSpan, cont.childNodes[0]);\n        }\n        else {\n            cont.appendChild(iconSpan);\n        }\n    }\n    setAria() {\n        attributes(this.element, {\n            'aria-label': this.element.textContent + ' progress', 'aria-valuemin': '0', 'aria-valuemax': '100', 'aria-valuenow': '0'\n        });\n    }\n    wireEvents() {\n        EventHandler.add(this.element, 'click', this.clickHandler, this);\n    }\n    unWireEvents() {\n        EventHandler.remove(this.element, 'click', this.clickHandler);\n    }\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param  {ProgressButtonModel} newProp - Specifies new properties\n     * @param  {ProgressButtonModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    onPropertyChanged(newProp, oldProp) {\n        const ele = this.element;\n        let isSpinning = false;\n        const clsList = this.element.querySelector('.e-spinner-pane').classList;\n        if (clsList.contains('e-spin-show')) {\n            isSpinning = true;\n        }\n        super.onPropertyChanged(newProp, oldProp);\n        for (const prop of Object.keys(newProp)) {\n            switch (prop) {\n                case 'content':\n                    this.setContent();\n                    this.createSpinner();\n                    if (isSpinning) {\n                        showSpinner(this.element);\n                        isSpinning = false;\n                    }\n                    if (this.enableProgress) {\n                        this.createProgress();\n                    }\n                    ele.setAttribute('aria-label', ele.textContent + ' progress');\n                    break;\n                case 'iconCss':\n                    if (!oldProp.iconCss) {\n                        this.setIconSpan();\n                    }\n                    break;\n                case 'iconPosition':\n                    this.setIconSpan();\n                    break;\n                case 'enableProgress':\n                    if (newProp.enableProgress) {\n                        this.createProgress();\n                    }\n                    else {\n                        remove(this.getProgress());\n                    }\n                    break;\n                case 'spinSettings':\n                    if (newProp.spinSettings.position) {\n                        ele.classList.remove('e-spin-' + oldProp.spinSettings.position.toLowerCase());\n                        this.setSpinPosition(this.getSpinner());\n                    }\n                    if (newProp.spinSettings.template || newProp.spinSettings.width) {\n                        ele.removeChild(this.getSpinner());\n                        this.createSpinner();\n                    }\n                    break;\n            }\n        }\n    }\n    /**\n     * Sets the focus to ProgressButton\n     * its native method\n     *\n     * @public\n     * @returns {void}\n     */\n    focusIn() {\n        this.element.focus();\n    }\n};\n__decorate$3([\n    Property(false)\n], ProgressButton.prototype, \"enableProgress\", void 0);\n__decorate$3([\n    Property(2000)\n], ProgressButton.prototype, \"duration\", void 0);\n__decorate$3([\n    Property('Left')\n], ProgressButton.prototype, \"iconPosition\", void 0);\n__decorate$3([\n    Property('')\n], ProgressButton.prototype, \"iconCss\", void 0);\n__decorate$3([\n    Property(false)\n], ProgressButton.prototype, \"disabled\", void 0);\n__decorate$3([\n    Property(false)\n], ProgressButton.prototype, \"isPrimary\", void 0);\n__decorate$3([\n    Property('')\n], ProgressButton.prototype, \"cssClass\", void 0);\n__decorate$3([\n    Property('')\n], ProgressButton.prototype, \"content\", void 0);\n__decorate$3([\n    Property(false)\n], ProgressButton.prototype, \"isToggle\", void 0);\n__decorate$3([\n    Property(false)\n], ProgressButton.prototype, \"enableHtmlSanitizer\", void 0);\n__decorate$3([\n    Complex({}, SpinSettings)\n], ProgressButton.prototype, \"spinSettings\", void 0);\n__decorate$3([\n    Complex({}, AnimationSettings)\n], ProgressButton.prototype, \"animationSettings\", void 0);\n__decorate$3([\n    Event()\n], ProgressButton.prototype, \"created\", void 0);\n__decorate$3([\n    Event()\n], ProgressButton.prototype, \"begin\", void 0);\n__decorate$3([\n    Event()\n], ProgressButton.prototype, \"progress\", void 0);\n__decorate$3([\n    Event()\n], ProgressButton.prototype, \"end\", void 0);\n__decorate$3([\n    Event()\n], ProgressButton.prototype, \"fail\", void 0);\nProgressButton = __decorate$3([\n    NotifyPropertyChanges\n], ProgressButton);\n\n/**\n * ProgressButton modules\n */\n\n/**\n * SplitButton all module\n */\n\nexport { getModel, upDownKeyHandler, setBlankIconStyle, Item, DropDownButton, SplitButton, Deferred, createButtonGroup, SpinSettings, AnimationSettings, ProgressButton };\n"]},"metadata":{},"sourceType":"module"}